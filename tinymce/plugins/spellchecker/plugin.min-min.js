!function(z,E){function k(f,c){for(var h,d=[],a=0;a<f.length;++a){if(h=F[f[a]]||j(f[a]),!h){throw"module definition dependecy not found: "+f[a]}d.push(h)}c.apply(null,d)}function b(d,c,a){if("string"!=typeof d){throw"invalid module definition, module id must be defined and be a string"}if(c===E){throw"invalid module definition, dependencies must be specified"}if(a===E){throw"invalid module definition, definition function must be specified"}k(c,function(){F[d]=a.apply(null,arguments)})}function w(a){return !!F[a]}function j(c){for(var e=z,d=c.split(/[.\/]/),a=0;a<d.length;++a){if(!e[d[a]]){return}e=e[d[a]]}return e}function C(m){for(var f=0;f<m.length;f++){for(var e=z,h=m[f],d=h.split(/[.\/]/),c=0;c<d.length-1;++c){e[d[c]]===E&&(e[d[c]]={}),e=e[d[c]]}e[d[d.length-1]]=F[h]}}var F={},v="tinymce/spellcheckerplugin/DomTextMatcher",B="tinymce/spellcheckerplugin/Plugin",A="tinymce/PluginManager",D="tinymce/util/Tools",y="tinymce/ui/Menu",g="tinymce/dom/DOMUtils",q="tinymce/util/JSONRequest",x="tinymce/util/URI";b(v,[],function(){return function(ac,O){function U(c,a){if(!c[0]){throw"findAndReplaceDOMText cannot handle zero-length matches"}return{start:c.index,end:c.index+c[0].length,text:c[0],data:a}}function R(c){var a;if(3===c.nodeType){return c.data}if(M[c.nodeName]&&!G[c.nodeName]){return""}if(a="",(G[c.nodeName]||X[c.nodeName])&&(a+="\n"),c=c.firstChild){do{a+=R(c)}while(c=c.nextSibling)}return a}function Y(ai,an,m){var f,N,h,al,ao=[],p=0,ak=ai,aj,am=0;an=an.slice(0),an.sort(function(c,a){return c.start-a.start}),aj=an.shift();ai:for(;;){if((G[ak.nodeName]||X[ak.nodeName])&&p++,3===ak.nodeType&&(!N&&ak.length+p>=aj.end?(N=ak,al=aj.end-p):f&&ao.push(ak),!f&&ak.length+p>aj.start&&(f=ak,h=aj.start-p),p+=ak.length),f&&N){if(ak=m({startNode:f,startNodeIndex:h,endNode:N,endNodeIndex:al,innerNodes:ao,match:aj.text,matchIndex:am}),p-=N.length-al,f=null,N=null,ao=[],aj=an.shift(),am++,!aj){break}}else{if((!M[ak.nodeName]||G[ak.nodeName])&&ak.firstChild){ak=ak.firstChild;continue}if(ak.nextSibling){ak=ak.nextSibling;continue}}for(;;){if(ak.nextSibling){ak=ak.nextSibling;break}if(ak.parentNode===ai){break ai}ak=ak.parentNode}}}function T(c){function a(e,h){var f=I[h];f.stencil||(f.stencil=c(f));var d=f.stencil.cloneNode(!1);return d.setAttribute("data-mce-index",h),e&&d.appendChild(ah.doc.createTextNode(e)),d}return function(aq){var aj,t,am,ai=aq.startNode,au=aq.endNode,ax=aq.matchIndex,al=ah.doc;if(ai===au){var at=ai;am=at.parentNode,aq.startNodeIndex>0&&(aj=al.createTextNode(at.data.substring(0,aq.startNodeIndex)),am.insertBefore(aj,at));var ar=a(aq.match,ax);return am.insertBefore(ar,at),aq.endNodeIndex<at.length&&(t=al.createTextNode(at.data.substring(aq.endNodeIndex)),am.insertBefore(t,at)),at.parentNode.removeChild(at),ar}aj=al.createTextNode(ai.data.substring(0,aq.startNodeIndex)),t=al.createTextNode(au.data.substring(aq.endNodeIndex));for(var aw=a(ai.data.substring(aq.startNodeIndex),ax),ap=[],N=0,ak=aq.innerNodes.length;ak>N;++N){var an=aq.innerNodes[N],ao=a(an.data,ax);an.parentNode.replaceChild(ao,an),ap.push(ao)}var av=a(au.data.substring(0,aq.endNodeIndex),ax);return am=ai.parentNode,am.insertBefore(aj,ai),am.insertBefore(aw,ai),am.removeChild(ai),am=au.parentNode,am.insertBefore(av,au),am.insertBefore(t,au),am.removeChild(au),av}}function ag(c){var a=c.parentNode;a.insertBefore(c.firstChild,c),c.parentNode.removeChild(c)}function P(e){var l=ac.getElementsByTagName("*"),f=[];e="number"==typeof e?""+e:null;for(var d=0;d<l.length;d++){var h=l[d],c=h.getAttribute("data-mce-index");null!==c&&c.length&&(c===e||null===e)&&f.push(h)}return f}function W(c){for(var a=I.length;a--;){if(I[a]===c){return a}}return -1}function ae(c){var a=[];return ad(function(e,d){c(e,d)&&a.push(e)}),I=a,this}function ad(c){for(var a=0,d=I.length;d>a&&c(I[a],a)!==!1;a++){}return this}function L(a){return I.length&&Y(ac,I,T(a)),this}function ab(c,a){if(J&&c.global){for(;Q=c.exec(J);){I.push(U(Q,a))}}return this}function S(c){var a,d=P(c?W(c):null);for(a=d.length;a--;){ag(d[a])}return this}function V(a){return I[a.getAttribute("data-mce-index")]}function Z(a){return P(W(a))[0]}function aa(c,a,d){return I.push({start:c,end:c+a,text:J.substr(c,a),data:d}),this}function K(c){var d=P(W(c)),a=O.dom.createRng();return a.setStartBefore(d[0]),a.setEndAfter(d[d.length-1]),a}function H(c,d){var a=K(c);return a.deleteContents(),d.length>0&&a.insertNode(O.dom.doc.createTextNode(d)),a}function af(){return I.splice(0,I.length),S(),this}var Q,I=[],J,ah=O.dom,G,M,X;return G=O.schema.getBlockElements(),M=O.schema.getWhiteSpaceElements(),X=O.schema.getShortEndedElements(),J=R(ac),{text:J,matches:I,each:ad,filter:ae,reset:af,matchFromElement:V,elementFromMatch:Z,find:ab,add:aa,wrap:L,unwrap:S,replace:H,rangeFromMatch:K,indexOf:W}}}),b(B,[v,A,D,y,g,q,x],function(l,f,p,h,d,m,c){f.add("spellchecker",function(G,H){function L(){return e.textMatcher||(e.textMatcher=new l(G.getBody(),G)),e.textMatcher}function R(N,s){var u=[];return p.each(s,function(t){u.push({selectable:!0,text:t.name,data:t.value})}),u}function Q(u){for(var s in u){return !1}return !0}function r(V){var X=[],t=S[V.text];p.each(t,function(s){X.push({text:s,onclick:function(){var u=L().replace(V,s);u.collapse(!1),G.selection.setRng(u),J()}})}),X.push.apply(X,[{text:"-"},{text:"Ignore",onclick:function(){K(V)}},{text:"Ignore all",onclick:function(){K(V,!0)}},{text:"Finish",onclick:M}]),i=new h({items:X,context:"contextmenu",onautohide:function(s){-1!=s.target.className.indexOf("spellchecker")&&s.preventDefault()},onhide:function(){i.remove(),i=null}}),i.renderTo(document.body);var U=L().elementFromMatch(V),Y=d.DOM.getPos(G.getContentAreaContainer()),W=G.dom.getPos(U),N=G.dom.getRoot();"BODY"==N.nodeName?(W.x-=N.ownerDocument.documentElement.scrollLeft||N.scrollLeft,W.y-=N.ownerDocument.documentElement.scrollTop||N.scrollTop):(W.x-=N.scrollLeft,W.y-=N.scrollTop),Y.x+=W.x,Y.y+=W.y,i.moveTo(Y.x,Y.y+U.offsetHeight)}function P(){function U(u){return G.setProgressState(!1),Q(u)?(G.windowManager.alert("No misspellings found"),void (I=!1)):(S=u,L().filter(function(X){return !!u[X.text]}).wrap(function(){return G.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1})}),void G.fire("SpellcheckStart"))}function W(X,Y,u){m.sendRPC({url:new c(H).toAbsolute(n.spellchecker_rpc_url),method:X,params:{lang:n.spellchecker_language||"en",words:Y},success:function(Z){u(Z)},error:function(Z,aa){Z="JSON Parse error."==Z?"Non JSON response:"+aa.responseText:"Error: "+Z,G.windowManager.alert(Z),G.setProgressState(!1),M()}})}var N=[],t={};if(I){return void M()}M(),I=!0;var V=G.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\xa7\xa9\xab\xae\xb1\xb6\xb7\xb8\xbb\xbc\xbd\xbe\xbf\xd7\xf7\xa4\u201d\u201c\u201e]+',"g");L().find(V).each(function(X){var u=X.text;if(!t[u]){if(/^\d+$/.test(u)||1==u.length){return}N.push(u),t[u]=!0}}),G.setProgressState(!0);var s=n.spellchecker_callback||W;s("spellcheck",N,U),G.focus()}function J(){G.dom.select("span.mce-spellchecker-word").length||M()}function K(s,t){G.selection.collapse(),t?L().each(function(u){u.text==s.text&&L().unwrap(u)}):L().unwrap(s),J()}function M(){L().reset(),e.textMatcher=null,I&&(I=!1,G.fire("SpellcheckEnd"))}function O(u){var s=n.spellchecker_language;u.control.items().each(function(t){t.active(t.settings.data===s)})}var o,e=this,S,I,i,n=G.settings,T=n.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";o=R("Language",p.map(T.split(","),function(u){var s=u.split("=");return{name:s[0],value:s[1]}})),G.on("click",function(s){if("mce-spellchecker-word"==s.target.className){s.preventDefault();var t=L().matchFromElement(s.target);G.selection.setRng(L().rangeFromMatch(t)),r(t)}}),G.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:P,selectable:!0,onPostRender:function(){var s=this;G.on("SpellcheckStart SpellcheckEnd",function(){s.active(I)})}});var a={tooltip:"Spellcheck",onclick:P,onPostRender:function(){var s=this;G.on("SpellcheckStart SpellcheckEnd",function(){s.active(I)})}};o.length>1&&(a.type="splitbutton",a.menu=o,a.onshow=O,a.onselect=function(s){n.spellchecker_language=s.control.settings.data}),G.addButton("spellchecker",a),G.addCommand("mceSpellCheck",P),G.on("remove",function(){i&&(i.remove(),i=null)}),this.getTextMatcher=L,n.spellchecker_language=n.spellchecker_language||n.language||"en"})}),C([v,B])}(this);