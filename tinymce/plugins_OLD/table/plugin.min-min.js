!function(B,G){function q(f,c){for(var g,d=[],a=0;a<f.length;++a){if(g=H[f[a]]||k(f[a]),!g){throw"module definition dependecy not found: "+f[a]}d.push(g)}c.apply(null,d)}function b(d,c,a){if("string"!=typeof d){throw"invalid module definition, module id must be defined and be a string"}if(c===G){throw"invalid module definition, dependencies must be specified"}if(a===G){throw"invalid module definition, definition function must be specified"}q(c,function(){H[d]=a.apply(null,arguments)})}function x(a){return !!H[a]}function k(c){for(var e=B,d=c.split(/[.\/]/),a=0;a<d.length;++a){if(!e[d[a]]){return}e=e[d[a]]}return e}function E(h){for(var f=0;f<h.length;f++){for(var e=B,g=h[f],d=g.split(/[.\/]/),c=0;c<d.length-1;++c){e[d[c]]===G&&(e[d[c]]={}),e=e[d[c]]}e[d[d.length-1]]=H[g]}}var H={},w="tinymce/tableplugin/TableGrid",D="tinymce/util/Tools",C="tinymce/Env",F="tinymce/tableplugin/Quirks",A="tinymce/util/VK",j="tinymce/tableplugin/CellSelection",v="tinymce/dom/TreeWalker",y="tinymce/tableplugin/Plugin",z="tinymce/PluginManager";b(w,[D,C],function(d,f){function c(h,g){return parseInt(h.getAttribute(g)||1,10)}var a=d.each;return function(ad,an){function Y(){var g=0;ab=[],a(["thead","tbody","tfoot"],function(h){var l=J.select("> "+h+" tr",an);a(l,function(p,m){m+=g,a(J.select("> td, > th",p),function(N,P){var L,u,M,o;if(ab[m]){for(;ab[m][P];){P++}}for(M=c(N,"rowspan"),o=c(N,"colspan"),u=m;m+M>u;u++){for(ab[u]||(ab[u]=[]),L=P;P+o>L;L++){ab[u][L]={part:h,real:u==m&&L==P,elm:N,rowspan:M,colspan:o}}}})}),g+=l.length})}function af(h,g){return h=h.cloneNode(g),h.removeAttribute("id"),h}function al(h,g){var l;return l=ab[g],l?l[h]:void 0}function ak(h,g,l){h&&(l=parseInt(l,10),1===l?h.removeAttribute(g,1):h.setAttribute(g,l,1))}function V(g){return g&&(J.hasClass(g.elm,"mce-item-selected")||g==X)}function aj(){var g=[];return a(an.rows,function(h){a(h.cells,function(l){return J.hasClass(l,"mce-item-selected")||X&&l==X.elm?(g.push(h),!1):void 0})}),g}function ac(){var g=J.createRng();g.setStartAfter(an),g.setEndAfter(an),I.setRng(g),J.remove(an)}function ae(h){var l,g={};return ad.settings.table_clone_elements!==!1&&(g=d.makeMap((ad.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),d.walk(h,function(m){var p;return 3==m.nodeType?(a(J.getParents(m.parentNode,null,h).reverse(),function(o){g[o.nodeName]&&(o=af(o,!1),l?p&&p.appendChild(o):l=p=o,p=o)}),p&&(p.innerHTML=f.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),h=af(h,!1),ak(h,"rowSpan",1),ak(h,"colSpan",1),l?h.appendChild(l):f.ie||(h.innerHTML='<br data-mce-bogus="1" />'),h}function ah(){var h=J.createRng(),g;return a(J.select("tr",an),function(l){0===l.cells.length&&J.remove(l)}),0===J.select("tr",an).length?(h.setStartBefore(an),h.setEndBefore(an),I.setRng(h),void J.remove(an)):(a(J.select("thead,tbody,tfoot",an),function(l){0===l.rows.length&&J.remove(l)}),Y(),void (aa&&(g=ab[Math.min(ab.length-1,aa.y)],g&&(I.select(g[Math.min(g.length-1,aa.x)].elm,!0),I.collapse(!0)))))}function ai(L,N,m,g){var u,h,M,P,p;for(u=ab[N][L].elm.parentNode,M=1;m>=M;M++){if(u=J.getNext(u,"tr")){for(h=L;h>=0;h--){if(p=ab[N+M][h].elm,p.parentNode==u){for(P=1;g>=P;P++){J.insertAfter(ae(p),p)}break}}if(-1==h){for(P=1;g>=P;P++){u.insertBefore(ae(u.cells[0]),u.cells[0])}}}}}function U(){a(ab,function(h,g){a(h,function(p,u){var m,s,l;if(V(p)&&(p=p.elm,m=c(p,"colspan"),s=c(p,"rowspan"),m>1||s>1)){for(ak(p,"rowSpan",1),ak(p,"colSpan",1),l=0;m-1>l;l++){J.insertAfter(ae(p),p)}ai(u,g,s-1,m)}})})}function K(at,M,h){var L,ar,P,S,u,N,R,ap,T,s,aq;if(at?(L=ag(at),ar=L.x,P=L.y,S=ar+(M-1),u=P+(h-1)):(aa=r=null,a(ab,function(l,g){a(l,function(m,o){V(m)&&(aa||(aa={x:o,y:g}),r={x:o,y:g})})}),aa&&(ar=aa.x,P=aa.y,S=r.x,u=r.y)),ap=al(ar,P),T=al(S,u),ap&&T&&ap.part==T.part){for(U(),Y(),ap=al(ar,P).elm,ak(ap,"colSpan",S-ar+1),ak(ap,"rowSpan",u-P+1),R=P;u>=R;R++){for(N=ar;S>=N;N++){ab[R]&&ab[R][N]&&(at=ab[R][N].elm,at!=ap&&(s=d.grep(at.childNodes),a(s,function(g){ap.appendChild(g)}),s.length&&(s=d.grep(ap.childNodes),aq=0,a(s,function(g){"BR"==g.nodeName&&J.getAttrib(g,"data-mce-bogus")&&aq++<s.length-1&&ap.removeChild(g)})),J.remove(at)))}}ah()}}function am(P){var u,m,S,T,R,N,l,L,M;if(a(ab,function(g,h){return a(g,function(o){return V(o)&&(o=o.elm,R=o.parentNode,N=af(R,!1),u=h,P)?!1:void 0}),P?!u:void 0}),u!==G){for(T=0;T<ab[0].length;T++){if(ab[u][T]&&(m=ab[u][T].elm,m!=S)){if(P){if(u>0&&ab[u-1][T]&&(L=ab[u-1][T].elm,M=c(L,"rowSpan"),M>1)){ak(L,"rowSpan",M+1);continue}}else{if(M=c(m,"rowspan"),M>1){ak(m,"rowSpan",M+1);continue}}l=ae(m),ak(l,"colSpan",m.colSpan),N.appendChild(l),S=m}}N.hasChildNodes()&&(P?R.parentNode.insertBefore(N,R):J.insertAfter(N,R))}}function Z(h){var g,l;a(ab,function(m){return a(m,function(p,o){return V(p)&&(g=o,h)?!1:void 0}),h?!g:void 0}),a(ab,function(u,M){var p,L,m;u[g]&&(p=u[g].elm,p!=l&&(m=c(p,"colspan"),L=c(p,"rowspan"),1==m?h?(p.parentNode.insertBefore(ae(p),p),ai(g,M,L-1,m)):(J.insertAfter(ae(p),p),ai(g,M,L-1,m)):ak(p,"colSpan",p.colSpan+1),l=p))})}function O(){var g=[];a(ab,function(h){a(h,function(m,l){V(m)&&-1===d.inArray(g,l)&&(a(ab,function(p){var o=p[l].elm,s;s=c(o,"colSpan"),s>1?ak(o,"colSpan",s-1):J.remove(o)}),g.push(l))})}),ah()}function Q(){function h(m){var l,s,p;l=J.getNext(m,"tr"),a(m.cells,function(u){var o=c(u,"rowSpan");o>1&&(ak(u,"rowSpan",o-1),s=ag(u),ai(s.x,s.y,1,1))}),s=ag(m.cells[0]),a(ab[s.y],function(u){var o;u=u.elm,u!=p&&(o=c(u,"rowSpan"),1>=o?J.remove(u):ak(u,"rowSpan",o-1),p=u)})}var g;g=aj(),a(g.reverse(),function(l){h(l)}),ah()}function ao(){var g=aj();return J.remove(g),ah(),g}function t(){var g=aj();return a(g,function(h,l){g[l]=af(h,!0)}),g}function W(l,g){var p=aj(),h=p[g?0:p.length-1],m=h.cells.length;l&&(a(ab,function(s){var o;return m=0,a(s,function(u){u.real&&(m+=u.colspan),u.elm.parentNode==h&&(o=1)}),o?!1:void 0}),g||l.reverse(),a(l,function(u){var L,s=u.cells.length,o;for(L=0;s>L;L++){o=u.cells[L],ak(o,"colSpan",1),ak(o,"rowSpan",1)}for(L=s;m>L;L++){u.appendChild(ae(u.cells[s-1]))}for(L=m;s>L;L++){J.remove(u.cells[L])}g?h.parentNode.insertBefore(u,h):J.insertAfter(u,h)}),J.removeClass(J.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function ag(h){var g;return a(ab,function(m,l){return a(m,function(p,o){return p.elm==h?(g={x:o,y:l},!1):void 0}),!g}),g}function i(g){aa=ag(g)}function e(){var h,g;return h=g=0,a(ab,function(m,l){a(m,function(L,s){var u,p;V(L)&&(L=ab[l][s],s>h&&(h=s),l>g&&(g=l),L.real&&(u=L.colspan-1,p=L.rowspan-1,u&&s+u>h&&(h=s+u),p&&l+p>g&&(g=l+p)))})}),{x:h,y:g}}function n(L){var R,m,g,u,h,P,S,p,N,M;if(r=ag(L),aa&&r){for(R=Math.min(aa.x,r.x),m=Math.min(aa.y,r.y),g=Math.max(aa.x,r.x),u=Math.max(aa.y,r.y),h=g,P=u,M=m;P>=M;M++){L=ab[M][R],L.real||R-(L.colspan-1)<R&&(R-=L.colspan-1)}for(N=R;h>=N;N++){L=ab[m][N],L.real||m-(L.rowspan-1)<m&&(m-=L.rowspan-1)}for(M=m;u>=M;M++){for(N=R;g>=N;N++){L=ab[M][N],L.real&&(S=L.colspan-1,p=L.rowspan-1,S&&N+S>h&&(h=N+S),p&&M+p>P&&(P=M+p))}}for(J.removeClass(J.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),M=m;P>=M;M++){for(N=R;h>=N;N++){ab[M][N]&&J.addClass(ab[M][N].elm,"mce-item-selected")}}}}var ab,aa,r,X,I=ad.selection,J=I.dom;an=an||J.getParent(I.getStart(),"table"),Y(),X=J.getParent(I.getStart(),"th,td"),X&&(aa=ag(X),r=e(),X=al(aa.x,aa.y)),d.extend(this,{deleteTable:ac,split:U,merge:K,insertRow:am,insertCol:Z,deleteCols:O,deleteRows:Q,cutRows:ao,copyRows:t,pasteRows:W,getPos:ag,setStartCell:i,setEndCell:n})}}),b(F,[A,C,D],function(f,c,g){function d(i,h){return parseInt(i.getAttribute(h)||1,10)}var a=g.each;return function(r){function m(){function l(W){function J(ac,t){var aa=ac?"previousSibling":"nextSibling",Z=r.dom.getParent(t,"tr"),af=Z[aa];if(af){return N(r,t,af,ac),W.preventDefault(),!0}var ad=r.dom.getParent(Z,"table"),ae=Z.parentNode,ab=ae.nodeName.toLowerCase();if("tbody"===ab||ab===(ac?"tfoot":"thead")){var Y=T(ac,ad,ae,"tbody");if(null!==Y){return L(ac,Y,t)}}return Q(ac,Z,aa,ad)}function T(ab,Z,aa,Y){var ac=r.dom.select(">"+Y,Z),u=ac.indexOf(aa);if(ab&&0===u||!ab&&u===ac.length-1){return X(ab,Z)}if(-1===u){var s="thead"===aa.tagName.toLowerCase()?0:ac.length-1;return ac[s]}return ac[u+(ab?-1:1)]}function X(Y,s){var u=Y?"thead":"tfoot",o=r.dom.select(">"+u,s);return 0!==o.length?o[0]:null}function L(u,t,s){var Y=P(t,u);return Y&&N(r,s,Y,u),W.preventDefault(),!0}function Q(aa,Z,u,t){var Y=t[u];if(Y){return V(Y),!0}var o=r.dom.getParent(t,"td,th");if(o){return J(aa,o,W)}var ab=P(Z,!aa);return V(ab),W.preventDefault(),!1}function P(u,o){var s=u&&u[o?"lastChild":"firstChild"];return s&&"BR"===s.nodeName?r.dom.getParent(s,"td,th"):s}function V(o){r.selection.setCursorLocation(o,0)}function O(){return R==f.UP||R==f.DOWN}function I(s){var o=s.selection.getNode(),u=s.dom.getParent(o,"tr");return null!==u}function K(s){for(var o=0,u=s;u.previousSibling;){u=u.previousSibling,o+=d(u,"colspan")}return o}function M(u,s){var Z=0,Y=0;return a(u.children,function(t,o){return Z+=d(t,"colspan"),Y=o,Z>s?!1:void 0}),Y}function N(ad,aa,ac,Z){var ae=K(r.dom.getParent(aa,"td,th")),Y=M(ac,ae),ab=ac.childNodes[Y],u=P(ab,Z);V(u||ab)}function U(Y){var s=r.selection.getNode(),u=r.dom.getParent(s,"td,th"),o=r.dom.getParent(Y,"td,th");return u&&u!==o&&S(u,o)}function S(s,o){return r.dom.getParent(s,"TABLE")===r.dom.getParent(o,"TABLE")}var R=W.keyCode;if(O()&&I(r)){var n=r.selection.getNode();setTimeout(function(){U(n)&&J(!W.shiftKey&&R===f.UP,n,W)},0)}}r.on("KeyDown",function(n){l(n)})}function h(){function l(I,s){var J=s.ownerDocument,u=J.createRange(),o;return u.setStartBefore(s),u.setEnd(I.endContainer,I.endOffset),o=J.createElement("body"),o.appendChild(u.cloneContents()),0===o.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}r.on("KeyDown",function(s){var u,n,I=r.dom;(37==s.keyCode||38==s.keyCode)&&(u=r.selection.getRng(),n=I.getParent(u.startContainer,"table"),n&&r.getBody().firstChild==n&&l(u,n)&&(u=I.createRng(),u.setStartBefore(n),u.setEndBefore(n),r.selection.setRng(u),s.preventDefault()))})}function i(){r.on("KeyDown SetContent VisualAid",function(){var l;for(l=r.getBody().lastChild;l;l=l.previousSibling){if(3==l.nodeType){if(l.nodeValue.length>0){break}}else{if(1==l.nodeType&&!l.getAttribute("data-mce-bogus")){break}}}l&&"TABLE"==l.nodeName&&(r.settings.forced_root_block?r.dom.add(r.getBody(),r.settings.forced_root_block,r.settings.forced_root_block_attrs,c.ie&&c.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):r.dom.add(r.getBody(),"br",{"data-mce-bogus":"1"}))}),r.on("PreProcess",function(n){var l=n.node.lastChild;l&&("BR"==l.nodeName||1==l.childNodes.length&&("BR"==l.firstChild.nodeName||"\xa0"==l.firstChild.nodeValue))&&l.previousSibling&&"TABLE"==l.previousSibling.nodeName&&r.dom.remove(l)})}function e(){function n(M,O,J,u){var L=3,I=M.dom.getParent(O.startContainer,"TABLE"),N,P,K;return I&&(N=I.parentNode),P=O.startContainer.nodeType==L&&0===O.startOffset&&0===O.endOffset&&u&&("TR"==J.nodeName||J==N),K=("TD"==J.nodeName||"TH"==J.nodeName)&&!u,P||K}function l(){var u=r.selection.getRng(),I=r.selection.getNode(),s=r.dom.getParent(u.startContainer,"TD,TH");if(n(r,u,I,s)){s||(s=I);for(var J=s.lastChild;J.lastChild;){J=J.lastChild}u.setEnd(J,J.nodeValue.length),r.selection.setRng(u)}}r.on("KeyDown",function(){l()}),r.on("MouseDown",function(o){2!=o.button&&l()})}function p(){r.on("keydown",function(n){if((n.keyCode==f.DELETE||n.keyCode==f.BACKSPACE)&&!n.isDefaultPrevented()){var s=r.dom.getParent(r.selection.getStart(),"table");if(s){for(var l=r.dom.select("td,th",s),u=l.length;u--;){if(!r.dom.hasClass(l[u],"mce-item-selected")){return}}n.preventDefault(),r.execCommand("mceTableDelete")}}})}p(),c.webkit&&(m(),e()),c.gecko&&(h(),i()),c.ie>10&&(h(),i())}}),b(j,[w,v,D],function(c,a,d){return function(m){function g(){m.getBody().style.webkitUserSelect="",n&&(m.dom.removeClass(m.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),n=!1)}function p(s){var J,r,I=s.target;if(e&&(h||I!=e)&&("TD"==I.nodeName||"TH"==I.nodeName)){r=f.getParent(I,"table"),r==t&&(h||(h=new c(m,r),h.setStartCell(e),m.getBody().style.webkitUserSelect="none"),h.setEndCell(I),n=!0),J=m.selection.getSel();try{J.removeAllRanges?J.removeAllRanges():J.empty()}catch(l){}s.preventDefault()}}var f=m.dom,h,e,t,n=!0;return m.on("MouseDown",function(i){2!=i.button&&(g(),e=f.getParent(i.target,"td,th"),t=f.getParent(e,"table"))}),m.on("mouseover",p),m.on("remove",function(){f.unbind(m.getDoc(),"mouseover",p)}),m.on("MouseUp",function(){function K(u,i){var N=new a(u,u);do{if(3==u.nodeType&&0!==d.trim(u.nodeValue).length){return void (i?s.setStart(u,0):s.setEnd(u,u.nodeValue.length))}if("BR"==u.nodeName){return void (i?s.setStartBefore(u):s.setEndBefore(u))}}while(u=i?N.next():N.prev())}var s,M=m.selection,L,r,I,J,l;if(e){if(h&&(m.getBody().style.webkitUserSelect=""),L=f.select("td.mce-item-selected,th.mce-item-selected"),L.length>0){s=f.createRng(),I=L[0],l=L[L.length-1],s.setStartBefore(I),s.setEndAfter(I),K(I,1),r=new a(I,f.getParent(L[0],"table"));do{if("TD"==I.nodeName||"TH"==I.nodeName){if(!f.hasClass(I,"mce-item-selected")){break}J=I}}while(I=r.next());K(J),M.setRng(s)}m.nodeChanged(),e=h=t=null}}),m.on("KeyUp",function(){g()}),{clear:g}}}),b(y,[w,F,j,D,v,C,z],function(m,u,f,c,h,d,p){function I(L){function O(a){return a?a.replace(/px$/,""):""}function V(a){return/^[0-9]+$/.test(a)&&(a+="px"),a}function J(a){g("left center right".split(" "),function(i){L.formatter.remove("align"+i,{},a)})}function T(){var i=L.dom,a,X,s,r;a=i.getParent(L.selection.getStart(),"table"),r={width:O(i.getStyle(a,"width")||i.getAttrib(a,"width")),height:O(i.getStyle(a,"height")||i.getAttrib(a,"height")),cellspacing:a?i.getAttrib(a,"cellspacing"):"",cellpadding:a?i.getAttrib(a,"cellpadding"):"",border:a?i.getAttrib(a,"border"):"",caption:!!i.select("caption",a)[0]},g("left center right".split(" "),function(Y){L.formatter.matchNode(a,"align"+Y)&&(r.align=Y)}),a||(X={label:"Cols",name:"cols"},s={label:"Rows",name:"rows"}),L.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:r,defaults:{type:"textbox",maxWidth:50},items:[X,s,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var Z=this.toJSON(),Y;L.undoManager.transact(function(){a||(a=N(Z.cols||1,Z.rows||1)),L.dom.setAttribs(a,{cellspacing:Z.cellspacing,cellpadding:Z.cellpadding,border:Z.border}),L.dom.setStyles(a,{width:V(Z.width),height:V(Z.height)}),Y=i.select("caption",a)[0],Y&&!Z.caption&&i.remove(Y),!Y&&Z.caption&&(Y=i.create("caption"),Y.innerHTML=d.ie?"\xa0":'<br data-mce-bogus="1"/>',a.insertBefore(Y,a.firstChild)),J(a),Z.align&&L.formatter.apply("align"+Z.align,{},a),L.focus(),L.addVisual()})}})}function S(i,a){L.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",size:10},{label:"Rows",name:"rows",type:"textbox",size:10}],onsubmit:function(){var r=this.toJSON();L.undoManager.transact(function(){i.merge(a,r.cols,r.rows)})}})}function t(){var i=L.dom,a,s,r=[];r=L.dom.select("td.mce-item-selected,th.mce-item-selected"),a=L.dom.getParent(L.selection.getStart(),"td,th"),!r.length&&a&&r.push(a),a=a||r[0],a&&(s={width:O(i.getStyle(a,"width")||i.getAttrib(a,"width")),height:O(i.getStyle(a,"height")||i.getAttrib(a,"height")),scope:i.getAttrib(a,"scope")},s.type=a.nodeName.toLowerCase(),g("left center right".split(" "),function(X){L.formatter.matchNode(a,"align"+X)&&(s.align=X)}),L.windowManager.open({title:"Cell properties",items:{type:"form",data:s,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var X=this.toJSON();L.undoManager.transact(function(){g(r,function(Y){L.dom.setAttrib(Y,"scope",X.scope),L.dom.setStyles(Y,{width:V(X.width),height:V(X.height)}),X.type&&Y.nodeName.toLowerCase()!=X.type&&(Y=i.rename(Y,X.type)),J(Y),X.align&&L.formatter.apply("align"+X.align,{},Y)}),L.focus()})}}))}function R(){var i=L.dom,a,Y,s,X,r=[];a=L.dom.getParent(L.selection.getStart(),"table"),Y=L.dom.getParent(L.selection.getStart(),"td,th"),g(a.rows,function(Z){g(Z.cells,function(aa){return i.hasClass(aa,"mce-item-selected")||aa==Y?(r.push(Z),!1):void 0})}),s=r[0],s&&(X={height:O(i.getStyle(s,"height")||i.getAttrib(s,"height")),scope:i.getAttrib(s,"scope")},X.type=s.parentNode.nodeName.toLowerCase(),g("left center right".split(" "),function(Z){L.formatter.matchNode(s,"align"+Z)&&(X.align=Z)}),L.windowManager.open({title:"Row properties",items:{type:"form",data:X,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var aa=this.toJSON(),ac,Z,ab;L.undoManager.transact(function(){var ad=aa.type;g(r,function(ae){L.dom.setAttrib(ae,"scope",aa.scope),L.dom.setStyles(ae,{height:V(aa.height)}),ad!=ae.parentNode.nodeName.toLowerCase()&&(ac=i.getParent(ae,"table"),Z=ae.parentNode,ab=i.select(ad,ac)[0],ab||(ab=i.create(ad),ac.firstChild?ac.insertBefore(ab,ac.firstChild):ac.appendChild(ab)),ab.appendChild(ae),Z.hasChildNodes()||i.remove(Z)),J(ae),aa.align&&L.formatter.apply("align"+aa.align,{},ae)}),L.focus()})}}))}function M(a){return function(){L.execCommand(a)}}function N(aa,Y){var ab,X,r;for(r='<table id="__mce"><tbody>',ab=0;Y>ab;ab++){for(r+="<tr>",X=0;aa>X;X++){r+="<td>"+(d.ie?" ":"<br>")+"</td>"}r+="</tr>"}r+="</tbody></table>",L.insertContent(r);var Z=L.dom.get("__mce");return L.dom.setAttrib(Z,"id",null),Z}function P(i,a){function r(){i.disabled(!L.dom.getParent(L.selection.getStart(),a)),L.selection.selectorChanged(a,function(s){i.disabled(!s)})}L.initialized?r():L.on("init",r)}function Q(){P(this,"table")}function o(){P(this,"td,th")}function e(){var i="";i='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var a=0;10>a;a++){i+="<tr>";for(var r=0;10>r;r++){i+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*a+r)+'" href="#" data-mce-x="'+r+'" data-mce-y="'+a+'" '+(r+a===0?' class="mce-active"':"")+"></a></td>"}i+="</tr>"}return i+="</table>",i+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function U(aa,ad,X){var Z=X.getEl().getElementsByTagName("table")[0],r=X.parent().rel,ac,ae,Y,ab;if(X.isRtl()||"tl-tr"==r){for(ae=9;ae>=0;ae--){for(ac=0;10>ac;ac++){ab=Z.rows[ae].childNodes[ac].firstChild,L.dom.toggleClass(ab,"mce-active",ac>=aa&&ad>=ae),ac>=aa&&ad>=ae&&(Y=ab)}}aa=9-aa,Z.nextSibling.innerHTML=aa+" x "+(ad+1)}else{for(ae=0;10>ae;ae++){for(ac=0;10>ac;ac++){ab=Z.rows[ae].childNodes[ac].firstChild,L.dom.toggleClass(ab,"mce-active",aa>=ac&&ad>=ae),aa>=ac&&ad>=ae&&(Y=ab)}}Z.nextSibling.innerHTML=aa+1+" x "+(ad+1)}return Y.parentNode}var K,l,n=this;L.settings.table_grid===!1?L.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:T}):L.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(a){a.aria&&(this.parent().hideAll(),a.stopImmediatePropagation(),T())},onhide:function(){var a=this.menu.items()[0].getEl().getElementsByTagName("a");L.dom.removeClass(a,"mce-active"),L.dom.addClass(a[0],"mce-active")},menu:[{type:"container",html:e(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(s){var a=s.target,X,i;"A"==a.tagName.toUpperCase()&&(X=parseInt(a.getAttribute("data-mce-x"),10),i=parseInt(a.getAttribute("data-mce-y"),10),(X!==this.lastX||i!==this.lastY)&&(U(X,i,s.control),this.lastX=X,this.lastY=i))},onkeydown:function(s){var a=this.lastX,X=this.lastY,i;switch(s.keyCode){case 37:a>0&&(a--,i=!0);break;case 39:i=!0,9>a&&a++;break;case 38:i=!0,X>0&&X--;break;case 40:i=!0,9>X&&X++}i&&(s.preventDefault(),s.stopPropagation(),U(a,X,s.control).focus(),this.lastX=a,this.lastY=X)},onclick:function(a){"A"==a.target.tagName.toUpperCase()&&(a.preventDefault(),a.stopPropagation(),this.parent().cancel(),N(this.lastX+1,this.lastY+1))}}]}),L.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:Q,onclick:T}),L.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:Q,cmd:"mceTableDelete"}),L.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:M("mceTableCellProps"),onPostRender:o},{text:"Merge cells",onclick:M("mceTableMergeCells"),onPostRender:o},{text:"Split cell",onclick:M("mceTableSplitCells"),onPostRender:o}]}),L.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:M("mceTableInsertRowBefore"),onPostRender:o},{text:"Insert row after",onclick:M("mceTableInsertRowAfter"),onPostRender:o},{text:"Delete row",onclick:M("mceTableDeleteRow"),onPostRender:o},{text:"Row properties",onclick:M("mceTableRowProps"),onPostRender:o},{text:"-"},{text:"Cut row",onclick:M("mceTableCutRow"),onPostRender:o},{text:"Copy row",onclick:M("mceTableCopyRow"),onPostRender:o},{text:"Paste row before",onclick:M("mceTablePasteRowBefore"),onPostRender:o},{text:"Paste row after",onclick:M("mceTablePasteRowAfter"),onPostRender:o}]}),L.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:M("mceTableInsertColBefore"),onPostRender:o},{text:"Insert column after",onclick:M("mceTableInsertColAfter"),onPostRender:o},{text:"Delete column",onclick:M("mceTableDeleteCol"),onPostRender:o}]});var W=[];g("inserttable tableprops deletetable | cell row column".split(" "),function(a){W.push("|"==a?{text:"-"}:L.menuItems[a])}),L.addButton("table",{type:"menubutton",title:"Table",menu:W}),d.isIE||L.on("click",function(a){a=a.target,"TABLE"===a.nodeName&&(L.selection.select(a),L.nodeChanged())}),n.quirks=new u(L),L.on("Init",function(){K=L.windowManager,n.cellSelection=new f(L)}),g({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(s){var r,X,a;a=L.dom.getParent(L.selection.getStart(),"th,td"),a&&(r=a.rowSpan,X=a.colSpan),L.dom.select("td.mce-item-selected,th.mce-item-selected").length?s.merge():S(s,a)},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){l=a.cutRows()},mceTableCopyRow:function(a){l=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(l,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(l)},mceTableDelete:function(a){a.deleteTable()}},function(a,i){L.addCommand(i,function(){var r=new m(L);r&&(a(r),L.execCommand("mceRepaint"),n.cellSelection.clear())})}),g({mceInsertTable:function(){T()},mceTableRowProps:R,mceTableCellProps:t},function(i,a){L.addCommand(a,function(r,s){i(s)})})}var g=c.each;p.add("table",I)}),E([w,F,j,y])}(this);