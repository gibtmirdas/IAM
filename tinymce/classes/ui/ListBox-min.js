define("tinymce/ui/ListBox",["tinymce/ui/MenuButton"],function(a){return a.extend({init:function(g){var d=this,c,e,f,h,b;d._values=c=g.values;if(c){for(e=0;e<c.length;e++){f=c[e].selected||g.value===c[e].value;if(f){h=h||c[e].text;d._value=c[e].value;break}}if(!f&&c.length>0){h=c[0].text;d._value=c[0].value}g.menu=c}g.text=g.text||h||c[0].text;d._super(g);d.addClass("listbox");d.on("select",function(j){var i=j.control;if(b){j.lastControl=b}if(g.multiple){i.active(!i.active())}else{d.value(j.control.settings.value)}b=i})},value:function(d){var b=this,e,h,g,c;function f(j,i){j.items().each(function(k){e=k.value()===i;if(e){h=h||k.text()}k.active(e);if(k.menu){f(k.menu,i)}})}if(typeof(d)!="undefined"){if(b.menu){f(b.menu,d)}else{g=b.settings.menu;for(c=0;c<g.length;c++){e=g[c].value==d;if(e){h=h||g[c].text}g[c].active=e}}b.text(h||this.settings.text)}return b._super(d)}})});