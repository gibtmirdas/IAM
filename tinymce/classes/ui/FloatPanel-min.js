define("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils"],function(i,h,b,a){var e,c,j=[];var d=[],k;var f=i.extend({Mixins:[h,b],init:function(o){var m=this;function n(){var q,t=f.zIndex||65535,r;if(d.length){for(q=0;q<d.length;q++){if(d[q].modal){t++;r=d[q]}d[q].getEl().style.zIndex=t;d[q].zIndex=t;t++}}var s=document.getElementById(m.classPrefix+"modal-block");if(r){a.css(s,"z-index",r.zIndex-1)}else{if(s){s.parentNode.removeChild(s);k=false}}f.currentZIndex=t}function l(r,q){while(r){if(r==q){return true}r=r.parent()}}function p(q){var r=a.getViewPort().y;function s(w,t){var v;for(var u=0;u<j.length;u++){if(j[u]!=q){v=j[u].parent();while(v&&(v=v.parent())){if(v==q){j[u].fixed(w).moveBy(0,t).repaint()}}}}}if(q.settings.autofix){if(!q._fixed){q._autoFixY=q.layoutRect().y;if(q._autoFixY<r){q.fixed(true).layoutRect({y:0}).repaint();s(true,r-q._autoFixY)}}else{if(q._autoFixY>r){q.fixed(false).layoutRect({y:q._autoFixY}).repaint();s(false,q._autoFixY-r)}}}}m._super(o);m._eventsRoot=m;m.addClass("floatpanel");if(o.autohide){if(!e){e=function(t){var s=j.length;while(s--){var r=j[s],q=r.getParentCtrl(t.target);if(r.settings.autohide){if(q){if(l(q,r)||r.parent()===q){continue}}t=r.fire("autohide",{target:t.target});if(!t.isDefaultPrevented()){r.hide()}}}};a.on(document,"click",e)}j.push(m)}if(o.autofix){if(!c){c=function(){var q;q=j.length;while(q--){p(j[q])}};a.on(window,"scroll",c)}m.on("move",function(){p(this)})}m.on("postrender show",function(s){if(s.control==m){var r,q=m.classPrefix;if(m.modal&&!k){r=a.createFragment('<div id="'+q+'modal-block" class="'+q+"reset "+q+'fade"></div>');r=r.firstChild;m.getContainerElm().appendChild(r);setTimeout(function(){a.addClass(r,q+"in");a.addClass(m.getEl(),q+"in")},0);k=true}d.push(m);n()}});m.on("close hide",function(r){if(r.control==m){var q=d.length;while(q--){if(d[q]===m){d.splice(q,1)}}n()}});m.on("show",function(){m.parents().each(function(q){if(q._fixed){m.fixed(true);return false}})});if(o.popover){m._preBodyHtml='<div class="'+m.classPrefix+'arrow"></div>';m.addClass("popover").addClass("bottom").addClass(m.isRtl()?"end":"start")}},fixed:function(n){var m=this;if(m._fixed!=n){if(m._rendered){var l=a.getViewPort();if(n){m.layoutRect().y-=l.y}else{m.layoutRect().y+=l.y}}m.toggleClass("fixed",n);m._fixed=n}return m},show:function(){var l=this,m,n=l._super();m=j.length;while(m--){if(j[m]===l){break}}if(m===-1){j.push(l)}return n},hide:function(){g(this);return this._super()},hideAll:function(){f.hideAll()},close:function(){var l=this;l.fire("close");return l.remove()},remove:function(){g(this);this._super()},postRender:function(){var l=this;if(l.settings.bodyRole){this.getEl("body").setAttribute("role",l.settings.bodyRole)}return l._super()}});f.hideAll=function(){var m=j.length;while(m--){var l=j[m];if(l&&l.settings.autohide){l.hide();j.splice(m,1)}}};function g(l){var m;m=j.length;while(m--){if(j[m]===l){j.splice(m,1)}}m=d.length;while(m--){if(d[m]===l){d.splice(m,1)}}}return f});