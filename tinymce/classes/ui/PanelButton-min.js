define("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(a,b){return a.extend({showPanel:function(){var c=this,d=c.settings;c.active(true);if(!c.panel){var e=d.panel;if(e.type){e={layout:"grid",items:e}}e.role=e.role||"dialog";e.popover=true;e.autohide=true;e.ariaRoot=true;c.panel=new b(e).on("hide",function(){c.active(false)}).on("cancel",function(f){f.stopPropagation();c.focus();c.hidePanel()}).parent(c).renderTo(c.getContainerElm());c.panel.fire("show");c.panel.reflow()}else{c.panel.show()}c.panel.moveRel(c.getEl(),d.popoverAlign||(c.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var c=this;if(c.panel){c.panel.hide()}},postRender:function(){var c=this;c.aria("haspopup",true);c.on("click",function(d){if(d.control===c){if(c.panel&&c.panel.visible()){c.hidePanel()}else{c.showPanel();c.panel.focus(!!d.aria)}}});return c._super()}})});