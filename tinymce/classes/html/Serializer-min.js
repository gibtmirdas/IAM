define("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(b,a){return function(d,e){var c=this,f=new b(d);d=d||{};d.validate="validate" in d?d.validate:true;c.schema=e=e||new a();c.writer=f;c.serialize=function(i){var h,j;j=d.validate;h={3:function(k){f.text(k.value,k.raw)},8:function(k){f.comment(k.value)},7:function(k){f.pi(k.name,k.value)},10:function(k){f.doctype(k.value)},4:function(k){f.cdata(k.value)},11:function(k){if((k=k.firstChild)){do{g(k)}while((k=k.next))}}};f.reset();function g(m){var u=h[m.type],k,p,t,s,q,v,o,n,r;if(!u){k=m.name;p=m.shortEnded;t=m.attributes;if(j&&t&&t.length>1){v=[];v.map={};r=e.getElementRule(m.name);for(o=0,n=r.attributesOrder.length;o<n;o++){s=r.attributesOrder[o];if(s in t.map){q=t.map[s];v.map[s]=q;v.push({name:s,value:q})}}for(o=0,n=t.length;o<n;o++){s=t[o].name;if(!(s in v.map)){q=t.map[s];v.map[s]=q;v.push({name:s,value:q})}}t=v}f.start(m.name,t,p);if(!p){if((m=m.firstChild)){do{g(m)}while((m=m.next))}f.end(k)}}else{u(m)}}if(i.type==1&&!d.inner){g(i)}else{h[11](i)}return f.getContent()}}});