define("tinymce/html/Schema",["tinymce/util/Tools"],function(a){var b={};var c=a.makeMap,g=a.each,d=a.extend,e=a.explode,i=a.inArray;function f(j,k){return j?j.split(k||" "):[]}function h(q){var n={},r,k;var o,p,j,m;function s(w,t,z){var y,x,A,v=arguments;function u(E){var D={},C,B;for(C=0,B=E.length;C<B;C++){D[E[C]]={}}return D}z=z||[];t=t||"";if(typeof(z)==="string"){z=f(z)}for(x=3;x<v.length;x++){if(typeof(v[x])==="string"){v[x]=f(v[x])}z.push.apply(z,v[x])}w=f(w);y=w.length;while(y--){A=[].concat(r,f(t));n[w[y]]={attributes:u(A),attributesOrder:A,children:u(z)}}}function l(w,v){var y,u,x,t;w=f(w);y=w.length;v=f(v);while(y--){u=n[w[y]];for(x=0,t=v.length;x<t;x++){u.attributes[v[x]]={};u.attributesOrder.push(v[x])}}}if(b[q]){return b[q]}r=f("id accesskey class dir lang style tabindex title");k=f("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul");o=f("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment");if(q!="html4"){r.push.apply(r,f("contenteditable contextmenu draggable dropzone hidden spellcheck translate"));k.push.apply(k,f("article aside details dialog figure header footer hgroup section nav"));o.push.apply(o,f("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))}if(q!="html5-strict"){r.push("xml:lang");m=f("acronym applet basefont big font strike tt");o.push.apply(o,m);g(m,function(t){s(t,"",o)});j=f("center dir isindex noframes");k.push.apply(k,j);p=[].concat(k,o);g(j,function(t){s(t,"",p)})}p=p||[].concat(k,o);s("html","manifest","head body");s("head","","base command link meta noscript script style title");s("title hr noscript br");s("base","href target");s("link","href rel media hreflang type sizes hreflang");s("meta","name http-equiv content charset");s("style","media type scoped");s("script","src async defer type charset");s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",p);s("address dt dd div caption","",p);s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o);s("blockquote","cite",p);s("ol","reversed start type","li");s("ul","","li");s("li","value",p);s("dl","","dt dd");s("a","href target rel media hreflang type",o);s("q","cite",o);s("ins del","cite datetime",p);s("img","src alt usemap ismap width height");s("iframe","src name width height",p);s("embed","src type width height");s("object","data type typemustmatch name usemap form width height",p,"param");s("param","name value");s("map","name",p,"area");s("area","alt coords shape href target rel media hreflang type");s("table","border","caption colgroup thead tfoot tbody tr"+(q=="html4"?" col":""));s("colgroup","span","col");s("col","span");s("tbody thead tfoot","","tr");s("tr","","td th");s("td","colspan rowspan headers",p);s("th","colspan rowspan headers scope abbr",p);s("form","accept-charset action autocomplete enctype method name novalidate target",p);s("fieldset","disabled form name",p,"legend");s("label","form for",o);s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",q=="html4"?p:o);s("select","disabled form multiple name required size","option optgroup");s("optgroup","disabled label","option");s("option","disabled label selected value");s("textarea","cols dirname disabled form maxlength name readonly required rows wrap");s("menu","type label",p,"li");s("noscript","",p);if(q!="html4"){s("wbr");s("ruby","",o,"rt rp");s("figcaption","",p);s("mark rt rp summary bdi","",o);s("canvas","width height",p);s("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height",p,"track source");s("audio","src crossorigin preload autoplay mediagroup loop muted controls",p,"track source");s("source","src type media");s("track","kind src srclang label default");s("datalist","",o,"option");s("article section nav aside header footer","",p);s("hgroup","","h1 h2 h3 h4 h5 h6");s("figure","",p,"figcaption");s("time","datetime",o);s("dialog","open",p);s("command","type label icon disabled checked radiogroup command");s("output","for form name",o);s("progress","value max",o);s("meter","value min max low high optimum",o);s("details","open",p,"summary");s("keygen","autofocus challenge disabled form keytype name")}if(q!="html5-strict"){l("script","language xml:space");l("style","xml:space");l("object","declare classid codebase codetype archive standby align border hspace vspace");l("param","valuetype type");l("a","charset name rev shape coords");l("br","clear");l("applet","codebase archive code object alt name width height align hspace vspace");l("img","name longdesc align border hspace vspace");l("iframe","longdesc frameborder marginwidth marginheight scrolling align");l("font basefont","size color face");l("input","usemap align");l("select","onchange");l("textarea");l("h1 h2 h3 h4 h5 h6 div p legend caption","align");l("ul","type compact");l("li","type");l("ol dl menu dir","compact");l("pre","width xml:space");l("hr","align noshade size width");l("isindex","prompt");l("table","summary width frame rules cellspacing cellpadding align bgcolor");l("col","width align char charoff valign");l("colgroup","width align char charoff valign");l("thead","align char charoff valign");l("tr","align char charoff valign bgcolor");l("th","axis align char charoff valign nowrap bgcolor width height");l("form","accept");l("td","abbr axis scope align char charoff valign nowrap bgcolor width height");l("tfoot","align char charoff valign");l("tbody","align char charoff valign");l("area","nohref");l("body","background bgcolor text link vlink alink")}if(q!="html4"){l("input button select textarea","autofocus");l("input textarea","placeholder");l("a","download");l("link script img","crossorigin");l("iframe","srcdoc sandbox seamless allowfullscreen")}g(f("a form meter progress dfn"),function(t){if(n[t]){delete n[t].children[t]}});delete n.caption.children.table;b[q]=n;return n}return function(C){var x=this,v={},m={},l=[],F,A;var r,t,B,u;var y,q,j,s={},n={};function p(I,G,H){var J=C[I];if(!J){J=b[I];if(!J){J=c(G," ",c(G.toUpperCase()," "));J=d(J,H);b[I]=J}}else{J=c(J,",",c(J.toUpperCase()," "))}return J}C=C||{};A=h(C.schema);if(C.verify_html===false){C.valid_elements="*[*]"}if(C.valid_styles){F={};g(C.valid_styles,function(H,G){F[G]=e(H)})}r=p("whitespace_elements","pre script noscript style textarea video audio iframe object");t=p("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");B=p("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");u=p("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");q=p("non_empty_elements","td th iframe video audio object script",B);j=p("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");y=p("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",j);g((C.special||"script noscript style textarea").split(" "),function(G){n[G]=new RegExp("</"+G+"[^>]*>","gi")});function k(G){return new RegExp("^"+G.replace(/([?+*])/g,".$1")+"$")}function E(N){var M,I,aa,W,H,K,V,Y,R,Z,ab,Q,L,X,G,T,J,ac,U,P=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,O=/[*?+]/;if(N){N=f(N,",");if(v["@"]){T=v["@"].attributes;J=v["@"].attributesOrder}for(M=0,I=N.length;M<I;M++){H=P.exec(N[M]);if(H){X=H[1];R=H[2];G=H[3];Y=H[5];Q={};L=[];K={attributes:Q,attributesOrder:L};if(X==="#"){K.paddEmpty=true}if(X==="-"){K.removeEmpty=true}if(H[4]==="!"){K.removeEmptyAttrs=true}if(T){for(ac in T){Q[ac]=T[ac]}L.push.apply(L,J)}if(Y){Y=f(Y,"|");for(aa=0,W=Y.length;aa<W;aa++){H=S.exec(Y[aa]);if(H){V={};ab=H[1];Z=H[2].replace(/::/g,":");X=H[3];U=H[4];if(ab==="!"){K.attributesRequired=K.attributesRequired||[];K.attributesRequired.push(Z);V.required=true}if(ab==="-"){delete Q[Z];L.splice(i(L,Z),1);continue}if(X){if(X==="="){K.attributesDefault=K.attributesDefault||[];K.attributesDefault.push({name:Z,value:U});V.defaultValue=U}if(X===":"){K.attributesForced=K.attributesForced||[];K.attributesForced.push({name:Z,value:U});V.forcedValue=U}if(X==="<"){V.validValues=c(U,"?")}}if(O.test(Z)){K.attributePatterns=K.attributePatterns||[];V.pattern=k(Z);K.attributePatterns.push(V)}else{if(!Q[Z]){L.push(Z)}Q[Z]=V}}}}if(!T&&R=="@"){T=Q;J=L}if(G){K.outputName=R;v[G]=K}if(O.test(R)){K.pattern=k(R);l.push(K)}else{v[R]=K}}}}}function w(G){v={};l=[];E(G);g(A,function(I,H){m[H]=I.children})}function o(H){var G=/^(~)?(.+)$/;if(H){b.text_block_elements=b.block_elements=null;g(f(H,","),function(M){var K=G.exec(M),L=K[1]==="~",N=L?"span":"div",J=K[2];m[J]=m[N];s[J]=N;if(!L){y[J.toUpperCase()]={};y[J]={}}if(!v[J]){var I=v[N];I=d({},I);delete I.removeEmptyAttrs;delete I.removeEmpty;v[J]=I}g(m,function(O,P){if(O[N]){m[P]=O=d({},m[P]);O[J]=O[N]}})})}}function z(H){var G=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(H){g(f(H,","),function(L){var K=G.exec(L),I,J;if(K){J=K[1];if(J){I=m[K[2]]}else{I=m[K[2]]={"#comment":{}}}I=m[K[2]];g(f(K[3],"|"),function(M){if(J==="-"){m[K[2]]=I=d({},m[K[2]]);delete I[M]}else{I[M]={}}})}})}}function D(G){var I=v[G],H;if(I){return I}H=l.length;while(H--){I=l[H];if(I.pattern.test(G)){return I}}}if(!C.valid_elements){g(A,function(H,G){v[G]={attributes:H.attributes,attributesOrder:H.attributesOrder};m[G]=H.children});if(C.schema!="html5"){g(f("strong/b em/i"),function(G){G=f(G,"/");v[G[1]].outputName=G[0]})}v.img.attributesDefault=[{name:"alt",value:""}];g(f("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(G){if(v[G]){v[G].removeEmpty=true}});g(f("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(G){v[G].paddEmpty=true});g(f("span"),function(G){v[G].removeEmptyAttrs=true})}else{w(C.valid_elements)}o(C.custom_elements);z(C.valid_children);E(C.extended_valid_elements);z("+ol[ul|ol],+ul[ul|ol]");if(C.invalid_elements){g(e(C.invalid_elements),function(G){if(v[G]){delete v[G]}})}if(!D("span")){E("span[!data-mce-type|*]")}x.children=m;x.styles=F;x.getBoolAttrs=function(){return u};x.getBlockElements=function(){return y};x.getTextBlockElements=function(){return j};x.getShortEndedElements=function(){return B};x.getSelfClosingElements=function(){return t};x.getNonEmptyElements=function(){return q};x.getWhiteSpaceElements=function(){return r};x.getSpecialElements=function(){return n};x.isValidChild=function(G,I){var H=m[G];return !!(H&&H[I])};x.isValid=function(H,G){var J,I,K=D(H);if(K){if(G){if(K.attributes[G]){return true}J=K.attributePatterns;if(J){I=J.length;while(I--){if(J[I].pattern.test(H)){return true}}}}else{return true}}return false};x.getElementRule=D;x.getCustomElements=function(){return s};x.addValidElements=E;x.setValidElements=w;x.addCustomElements=o;x.addValidChildren=z;x.elements=v}});