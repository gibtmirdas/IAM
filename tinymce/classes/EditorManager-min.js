define("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(d,j,m,f,a,h,b,e){var o=j.DOM;var i=a.explode,l=a.each,g=a.extend;var c=0,n;var k={majorVersion:"@@majorVersion@@",minorVersion:"@@minorVersion@@",releaseDate:"@@releaseDate@@",editors:[],i18n:b,activeEditor:null,setup:function(){var s=this,u,q,v="",r;q=document.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(q)){q+="/"}r=window.tinymce||window.tinyMCEPreInit;if(r){u=r.base||r.baseURL;v=r.suffix}else{var p=document.getElementsByTagName("script");for(var t=0;t<p.length;t++){var w=p[t].src;if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(w)){if(w.indexOf(".min")!=-1){v=".min"}u=w.substring(0,w.lastIndexOf("/"));break}}}s.baseURL=new m(q).toAbsolute(u);s.documentBaseURL=q;s.baseURI=new m(s.baseURL);s.suffix=v;s.focusManager=new e(s)},init:function(q){var x=this,v=[],u;function t(z){var y=z.id;if(!y){y=z.name;if(y&&!o.get(y)){y=z.name}else{y=o.uniqueId()}z.setAttribute("id",y)}return y}function w(A,z){if(!x.get(A)){var y=new d(A,z,x);v.push(y);y.render()}}function p(A,B,y){var z=A[B];if(!z){return}return z.apply(y||this,Array.prototype.slice.call(arguments,2))}function s(z,y){return y.constructor===RegExp?y.test(z.className):o.hasClass(z,y)}function r(){var y,z;o.unbind(window,"ready",r);p(q,"onpageload");if(q.types){l(q.types,function(A){l(o.select(A.selector),function(B){w(t(B),g({},q,A))})});return}else{if(q.selector){l(o.select(q.selector),function(A){w(t(A),q)});return}}switch(q.mode){case"exact":y=q.elements||"";if(y.length>0){l(i(y),function(A){if(o.get(A)){u=new d(A,q,x);v.push(u);u.render()}else{l(document.forms,function(B){l(B.elements,function(C){if(C.name===A){A="mce_editor_"+c++;o.setAttrib(C,"id",A);w(A,q)}})})}})}break;case"textareas":case"specific_textareas":l(o.select("textarea"),function(A){if(q.editor_deselector&&s(A,q.editor_deselector)){return}if(!q.editor_selector||s(A,q.editor_selector)){w(t(A),q)}});break}if(q.oninit){y=z=0;l(v,function(A){z++;if(!A.initialized){A.on("init",function(){y++;if(y==z){p(q,"oninit")}})}else{y++}if(y==z){p(q,"oninit")}})}}x.settings=q;o.bind(window,"ready",r)},get:function(p){if(!arguments.length){return this.editors}return p in this.editors?this.editors[p]:null},add:function(q){var p=this,r=p.editors;r[q.id]=q;r.push(q);p.activeEditor=q;p.fire("AddEditor",{editor:q});if(!n){n=function(){p.fire("BeforeUnload")};o.bind(window,"beforeunload",n)}return q},createEditor:function(q,p){return this.add(new d(q,p,this))},remove:function(p){var q=this,r,u=q.editors,t,s;if(!p){for(r=u.length-1;r>=0;r--){q.remove(u[r])}return}if(typeof(p)=="string"){p=p.selector||p;l(o.select(p),function(v){q.remove(u[v.id])});return}t=p;if(!u[t.id]){return null}delete u[t.id];for(r=0;r<u.length;r++){if(u[r]==t){u.splice(r,1);s=true;break}}if(q.activeEditor==t){q.activeEditor=u[0]}if(s){q.fire("RemoveEditor",{editor:t})}if(!u.length){o.unbind(window,"beforeunload",n)}t.remove();return t},execCommand:function(t,s,r){var p=this,q=p.get(r);switch(t){case"mceAddEditor":if(!p.get(r)){new d(r,p.settings,p).render()}return true;case"mceRemoveEditor":if(q){q.remove()}return true;case"mceToggleEditor":if(!q){p.execCommand("mceAddEditor",0,r);return true}if(q.isHidden()){q.show()}else{q.hide()}return true}if(p.activeEditor){return p.activeEditor.execCommand(t,s,r)}return false},triggerSave:function(){l(this.editors,function(p){p.save()})},addI18n:function(q,p){b.add(q,p)},translate:function(p){return b.translate(p)}};g(k,h);k.setup();window.tinymce=window.tinyMCE=k;return k});