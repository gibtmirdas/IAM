define("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],function(c,a,b){return c.extend({init:function(e){var d=this;d._super(e);d.addClass("combobox");d.subinput=true;d.ariaTarget="inp";e=d.settings;e.menu=e.menu||e.values;if(e.menu){e.icon="caret"}d.on("click",function(g){var h=g.target,f=d.getEl();while(h&&h!=f){if(h.id&&h.id.indexOf("-open")!=-1){d.fire("action");if(e.menu){d.showMenu();if(g.aria){d.menu.items()[0].focus()}}}h=h.parentNode}});d.on("keydown",function(f){if(f.target.nodeName=="INPUT"&&f.keyCode==13){d.parents().reverse().each(function(g){f.preventDefault();d.fire("change");if(g.hasEventListeners("submit")&&g.toJSON){g.fire("submit",{data:g.toJSON()});return false}})}});if(e.placeholder){d.addClass("placeholder");d.on("focusin",function(){if(!d._hasOnChange){b.on(d.getEl("inp"),"change",function(){d.fire("change")});d._hasOnChange=true}if(d.hasClass("placeholder")){d.getEl("inp").value="";d.removeClass("placeholder")}});d.on("focusout",function(){if(d.value().length===0){d.getEl("inp").value=e.placeholder;d.addClass("placeholder")}})}},showMenu:function(){var d=this,e=d.settings,f;if(!d.menu){f=e.menu||[];if(f.length){f={type:"menu",items:f}}else{f.type=f.type||"menu"}d.menu=a.create(f).parent(d).renderTo(d.getContainerElm());d.fire("createmenu");d.menu.reflow();d.menu.on("cancel",function(g){if(g.control===d.menu){d.focus()}});d.menu.on("show hide",function(g){g.control.items().each(function(h){h.active(h.value()==d.value())})}).fire("show");d.menu.on("select",function(g){d.value(g.control.value())});d.on("focusin",function(g){if(g.target.tagName.toUpperCase()=="INPUT"){d.menu.hide()}});d.aria("expanded",true)}d.menu.show();d.menu.layoutRect({w:d.layoutRect().w});d.menu.moveRel(d.getEl(),d.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var d=this;if(typeof(e)!="undefined"){d._value=e;d.removeClass("placeholder");if(d._rendered){d.getEl("inp").value=e}return d}if(d._rendered){e=d.getEl("inp").value;if(e!=d.settings.placeholder){return e}return""}return d._value},disabled:function(e){var d=this;if(d._rendered&&typeof(e)!="undefined"){d.getEl("inp").disabled=e}return d._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,j=e.getEl(),d=e.getEl("open"),h=e.layoutRect();var g,f;if(d){g=h.w-b.getSize(d).width-10}else{g=h.w-10}var i=document;if(i.all&&(!i.documentMode||i.documentMode<=8)){f=(e.layoutRect().h-2)+"px"}b.css(j.firstChild,{width:g,lineHeight:f});e._super();return e},postRender:function(){var d=this;b.on(this.getEl("inp"),"change",function(){d.fire("change")});return d._super()},remove:function(){b.off(this.getEl("inp"));this._super()},renderHtml:function(){var l=this,d=l._id,e=l.settings,f=l.classPrefix;var i=e.value||e.placeholder||"";var h,k,g="",j="";if("spellcheck" in e){j+=' spellcheck="'+e.spellcheck+'"'}if(e.maxLength){j+=' maxlength="'+e.maxLength+'"'}if(e.size){j+=' size="'+e.size+'"'}if(e.subtype){j+=' type="'+e.subtype+'"'}if(l.disabled()){j+=' disabled="disabled"'}h=e.icon;if(h&&h!="caret"){h=f+"ico "+f+"i-"+e.icon}k=l._text;if(h||k){g=('<div id="'+d+'-open" class="'+f+"btn "+f+'open" tabIndex="-1" role="button"><button id="'+d+'-action" type="button" hidefocus="1" tabindex="-1">'+(h!="caret"?'<i class="'+h+'"></i>':'<i class="'+f+'caret"></i>')+(k?(h?" ":"")+k:"")+"</button></div>");l.addClass("has-open")}return('<div id="'+d+'" class="'+l.classes()+'"><input id="'+d+'-inp" class="'+f+"textbox "+f+'placeholder" value="'+i+'" hidefocus="1"'+j+" />"+g+"</div>")}})});