define("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(a){return a.extend({recalc:function(q){var F=q.settings,n,p,s,z,u,r,c,C,m,o,l,j,i,g,t,B,f,I,L,v,H,E,K=[],G=[],k,D,b,e;F=q.settings;s=q.items().filter(":visible");z=q.layoutRect();p=F.columns||Math.ceil(Math.sqrt(s.length));n=Math.ceil(s.length/p);f=F.spacingH||F.spacing||0;I=F.spacingV||F.spacing||0;L=F.alignH||F.align;v=F.alignV||F.align;t=q._paddingBox;if(L&&typeof(L)=="string"){L=[L]}if(v&&typeof(v)=="string"){v=[v]}for(o=0;o<p;o++){K.push(0)}for(l=0;l<n;l++){G.push(0)}for(l=0;l<n;l++){for(o=0;o<p;o++){m=s[l*p+o];if(!m){break}C=m.layoutRect();k=C.minW;D=C.minH;K[o]=k>K[o]?k:K[o];G[l]=D>G[l]?D:G[l]}}b=z.innerW-t.left-t.right;for(H=0,o=0;o<p;o++){H+=K[o]+(o>0?f:0);b-=(o>0?f:0)+K[o]}e=z.innerH-t.top-t.bottom;for(E=0,l=0;l<n;l++){E+=G[l]+(l>0?I:0);e-=(l>0?I:0)+G[l]}H+=t.left+t.right;E+=t.top+t.bottom;c={};c.minW=H+(z.w-z.innerW);c.minH=E+(z.h-z.innerH);c.contentW=c.minW-z.deltaW;c.contentH=c.minH-z.deltaH;c.minW=Math.min(c.minW,z.maxW);c.minH=Math.min(c.minH,z.maxH);c.minW=Math.max(c.minW,z.startMinWidth);c.minH=Math.max(c.minH,z.startMinHeight);if(z.autoResize&&(c.minW!=z.minW||c.minH!=z.minH)){c.w=c.minW;c.h=c.minH;q.layoutRect(c);this.recalc(q);if(q._lastRect===null){var d=q.parent();if(d){d._lastRect=null;d.recalc()}}return}if(z.autoResize){c=q.layoutRect(c);c.contentW=c.minW-z.deltaW;c.contentH=c.minH-z.deltaH}var J;if(F.packV=="start"){J=0}else{J=e>0?Math.floor(e/n):0}var w=0;var A=F.flexWidths;if(A){for(o=0;o<A.length;o++){w+=A[o]}}else{w=p}var h=b/w;for(o=0;o<p;o++){K[o]+=A?A[o]*h:h}i=t.top;for(l=0;l<n;l++){j=t.left;r=G[l]+J;for(o=0;o<p;o++){m=s[l*p+o];if(!m){break}g=m.settings;C=m.layoutRect();u=Math.max(K[o],C.startMinWidth);C.x=j;C.y=i;B=g.alignH||(L?(L[o]||L[0]):null);if(B=="center"){C.x=j+(u/2)-(C.w/2)}else{if(B=="right"){C.x=j+u-C.w}else{if(B=="stretch"){C.w=u}}}B=g.alignV||(v?(v[o]||v[0]):null);if(B=="center"){C.y=i+(r/2)-(C.h/2)}else{if(B=="bottom"){C.y=i+r-C.h}else{if(B=="stretch"){C.h=r}}}m.layoutRect(C);j+=u+f;if(m.recalc){m.recalc()}}i+=r+I}}})});