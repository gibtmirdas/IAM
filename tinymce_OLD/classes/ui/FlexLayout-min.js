define("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(a){return a.extend({recalc:function(E){var Q,L,r,O,m,u,K,p,d,R,e,n;var M,c,f,h,k=[],j,x,I,B,C,P;var H,w,o,g,T,F,q,G;var y,b,v,J,A,N;var D,z;var s=Math.max,S=Math.min;r=E.items().filter(":visible");O=E.layoutRect();m=E._paddingBox;u=E.settings;n=E.isRtl()?(u.direction||"row-reversed"):u.direction;K=u.align;p=E.isRtl()?(u.pack||"end"):u.pack;d=u.spacing||0;if(n=="row-reversed"||n=="column-reverse"){r=r.set(r.toArray().reverse());n=n.split("-")[0]}if(n=="column"){o="y";H="h";w="minH";g="maxH";F="innerH";T="top";q="deltaH";G="contentH";A="left";v="w";y="x";b="innerW";J="minW";N="right";D="deltaW";z="contentW"}else{o="x";H="w";w="minW";g="maxW";F="innerW";T="left";q="deltaW";G="contentW";A="top";v="h";y="y";b="innerH";J="minH";N="bottom";D="deltaH";z="contentH"}e=O[F]-m[T]-m[T];P=R=0;for(Q=0,L=r.length;Q<L;Q++){M=r[Q];c=M.layoutRect();f=M.settings;h=f.flex;e-=(Q<L-1?d:0);if(h>0){R+=h;if(c[g]){k.push(M)}c.flex=h}e-=c[w];j=m[A]+c[J]+m[N];if(j>P){P=j}}B={};if(e<0){B[w]=O[w]-e+O[q]}else{B[w]=O[F]-e+O[q]}B[J]=P+O[D];B[G]=O[F]-e;B[z]=P;B.minW=S(B.minW,O.maxW);B.minH=S(B.minH,O.maxH);B.minW=s(B.minW,O.startMinWidth);B.minH=s(B.minH,O.startMinHeight);if(O.autoResize&&(B.minW!=O.minW||B.minH!=O.minH)){B.w=B.minW;B.h=B.minH;E.layoutRect(B);this.recalc(E);if(E._lastRect===null){var t=E.parent();if(t){t._lastRect=null;t.recalc()}}return}I=e/R;for(Q=0,L=k.length;Q<L;Q++){M=k[Q];c=M.layoutRect();x=c[g];j=c[w]+c.flex*I;if(j>x){e-=(c[g]-c[w]);R-=c.flex;c.flex=0;c.maxFlexSize=x}else{c.maxFlexSize=0}}I=e/R;C=m[T];B={};if(R===0){if(p=="end"){C=e+m[T]}else{if(p=="center"){C=Math.round((O[F]/2)-((O[F]-e)/2))+m[T];if(C<0){C=m[T]}}else{if(p=="justify"){C=m[T];d=Math.floor(e/(r.length-1))}}}}B[y]=m[A];for(Q=0,L=r.length;Q<L;Q++){M=r[Q];c=M.layoutRect();j=c.maxFlexSize||c[w];if(K==="center"){B[y]=Math.round((O[b]/2)-(c[v]/2))}else{if(K==="stretch"){B[v]=s(c[J]||0,O[b]-m[A]-m[N]);B[y]=m[A]}else{if(K==="end"){B[y]=O[b]-c[v]-m.top}}}if(c.flex>0){j+=c.flex*I}B[H]=j;B[o]=C;M.layoutRect(B);if(M.recalc){M.recalc()}C+=j+d}}})});