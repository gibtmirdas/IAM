tinymce.PluginManager.add("wordcount",function(d){function c(){d.theme.panel.find("#wordcount").text(["Words: {0}",b.getCount()])}var g,f,b=this;g=d.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g),f=d.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g),d.on("init",function(){var a=d.theme.panel&&d.theme.panel.find("#statusbar")[0];a&&window.setTimeout(function(){a.insert({type:"label",name:"wordcount",text:["Words: {0}",b.getCount()],classes:"wordcount",disabled:d.settings.readonly},0),d.on("setcontent beforeaddundo",c),d.on("keyup",function(h){32==h.keyCode&&c()})},0)}),b.getCount=function(){var h=d.getContent({format:"raw"}),e=0;if(h){h=h.replace(/\.\.\./g," "),h=h.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),h=h.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),h=h.replace(f,"");var i=h.match(g);i&&(e=i.length)}return e}});