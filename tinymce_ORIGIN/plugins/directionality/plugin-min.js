tinymce.PluginManager.add("directionality",function(b){function a(d){var g=b.dom,f,e=b.selection.getSelectedBlocks();if(e.length){f=g.getAttrib(e[0],"dir");tinymce.each(e,function(h){if(!g.getParent(h.parentNode,"*[dir='"+d+"']",g.getRoot())){if(f!=d){g.setAttrib(h,"dir",d)}else{g.setAttrib(h,"dir",null)}}});b.nodeChanged()}}function c(e){var d=[];tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(f){d.push(f+"[dir="+e+"]")});return d.join(",")}b.addCommand("mceDirectionLTR",function(){a("ltr")});b.addCommand("mceDirectionRTL",function(){a("rtl")});b.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:c("ltr")});b.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:c("rtl")})});