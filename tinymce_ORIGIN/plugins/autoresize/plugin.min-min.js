tinymce.PluginManager.add("autoresize",function(f){function d(){return f.plugins.fullscreen&&f.plugins.fullscreen.isFullscreen()}function c(e){var v,a,o,t,j,i,k,q,p=tinymce.DOM;if(a=f.getDoc()){if(o=a.body,t=a.documentElement,j=g.autoresize_min_height,!o||e&&"setcontent"===e.type&&e.initial||d()){return void (o&&t&&(o.style.overflowY="auto",t.style.overflowY="auto"))}k=f.dom.getStyle(o,"margin-top",!0),q=f.dom.getStyle(o,"margin-bottom",!0),i=o.offsetHeight+parseInt(k,10)+parseInt(q,10),(isNaN(i)||0>=i)&&(i=tinymce.Env.ie?o.scrollHeight:tinymce.Env.webkit&&0===o.clientHeight?0:o.offsetHeight),i>g.autoresize_min_height&&(j=i),g.autoresize_max_height&&i>g.autoresize_max_height?(j=g.autoresize_max_height,o.style.overflowY="auto",t.style.overflowY="auto"):(o.style.overflowY="hidden",t.style.overflowY="hidden",o.scrollTop=0),j!==b&&(v=j-b,p.setStyle(p.get(f.id+"_ifr"),"height",j+"px"),b=j,tinymce.isWebKit&&0>v&&c(e))}}function h(i,a,j){setTimeout(function(){c({}),i--?h(i,a,j):j&&j()},a)}var g=f.settings,b=0;f.settings.inline||(g.autoresize_min_height=parseInt(f.getParam("autoresize_min_height",f.getElement().offsetHeight),10),g.autoresize_max_height=parseInt(f.getParam("autoresize_max_height",0),10),f.on("init",function(){var a=f.getParam("autoresize_overflow_padding",1);f.dom.setStyles(f.getBody(),{paddingBottom:f.getParam("autoresize_bottom_margin",50),paddingLeft:a,paddingRight:a})}),f.on("nodechange setcontent keyup FullscreenStateChanged",c),f.getParam("autoresize_on_init",!0)&&f.on("init",function(){h(20,100,function(){h(5,1000)})}),f.addCommand("mceAutoResize",c))});