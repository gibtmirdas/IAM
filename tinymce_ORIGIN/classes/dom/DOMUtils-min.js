define("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(d,j,g,h,r,e,c,b,m){var f=b.each,i=b.is,k=b.grep,o=b.trim,s=b.extend;var p=c.webkit,n=c.ie;var l=/^([a-z0-9],?)+$/i;var t=/^[ \t\r\n]*$/;var a=b.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");function q(x,v){var u=this,w;u.doc=x;u.win=window;u.files={};u.counter=0;u.stdMode=!n||x.documentMode>=8;u.boxModel=!n||x.compatMode=="CSS1Compat"||u.stdMode;u.hasOuterHTML="outerHTML" in x.createElement("a");u.styleSheetLoader=new m(x);this.boundEvents=[];u.settings=v=s({keep_values:false,hex_colors:1},v);u.schema=v.schema;u.styles=new j({url_converter:v.url_converter,url_converter_scope:v.url_converter_scope},v.schema);u.fixDoc(x);u.events=v.ownEvents?new g(v.proxy):g.Event;w=v.schema?v.schema.getBlockElements():{};u.isBlock=function(z){if(!z){return false}var y=z.nodeType;if(y){return !!(y===1&&w[z.nodeName])}return !!w[z]}}q.prototype={root:null,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},fixDoc:function(w){var v=this.settings,u;if(n&&v.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(x){w.createElement(x)});for(u in v.schema.getCustomElements()){w.createElement(u)}}},clone:function(w,u){var v=this,y,x;if(!n||w.nodeType!==1||u){return w.cloneNode(u)}x=v.doc;if(!u){y=x.createElement(w.nodeName);f(v.getAttribs(w),function(z){v.setAttrib(y,z.nodeName,v.getAttrib(w,z.nodeName))});return y}return y.firstChild},getRoot:function(){var u=this;return u.get(u.settings.root_element)||u.doc.body},getViewPort:function(v){var u,w;v=!v?this.win:v;u=v.document;w=this.boxModel?u.documentElement:u.body;return{x:v.pageXOffset||w.scrollLeft,y:v.pageYOffset||w.scrollTop,w:v.innerWidth||w.clientWidth,h:v.innerHeight||w.clientHeight}},getRect:function(x){var u=this,w,v;x=u.get(x);w=u.getPos(x);v=u.getSize(x);return{x:w.x,y:w.y,w:v.w,h:v.h}},getSize:function(y){var v=this,u,x;y=v.get(y);u=v.getStyle(y,"width");x=v.getStyle(y,"height");if(u.indexOf("px")===-1){u=0}if(x.indexOf("px")===-1){x=0}return{w:parseInt(u,10)||y.offsetWidth||y.clientWidth,h:parseInt(x,10)||y.offsetHeight||y.clientHeight}},getParent:function(w,u,v){return this.getParents(w,u,v,false)},getParents:function(z,v,w,A){var y=this,x,u=[];z=y.get(z);A=A===undefined;w=w||(y.getRoot().nodeName!="BODY"?y.getRoot().parentNode:null);if(i(v,"string")){x=v;if(v==="*"){v=function(B){return B.nodeType==1}}else{v=function(B){return y.is(B,x)}}}while(z){if(z==w||!z.nodeType||z.nodeType===9){break}if(!v||v(z)){if(A){u.push(z)}else{return z}}z=z.parentNode}return A?u:null},get:function(v){var u;if(v&&this.doc&&typeof(v)=="string"){u=v;v=this.doc.getElementById(v);if(v&&v.id!==u){return this.doc.getElementsByName(u)[1]}}return v},getNext:function(v,u){return this._findSib(v,u,"nextSibling")},getPrev:function(v,u){return this._findSib(v,u,"previousSibling")},select:function(u,w){var v=this;return d(u,v.get(w)||v.get(v.settings.root_element)||v.doc,[])},is:function(x,u){var v;if(x.length===undefined){if(u==="*"){return x.nodeType==1}if(l.test(u)){u=u.toLowerCase().split(/,/);x=x.nodeName.toLowerCase();for(v=u.length-1;v>=0;v--){if(u[v]==x){return true}}return false}}if(x.nodeType&&x.nodeType!=1){return false}var w=x.nodeType?[x]:x;return d(u,w[0].ownerDocument||w[0],null,w).length>0},add:function(z,w,v,y,x){var u=this;return this.run(z,function(B){var A;A=i(w,"string")?u.doc.createElement(w):w;u.setAttribs(A,v);if(y){if(y.nodeType){A.appendChild(y)}else{u.setHTML(A,y)}}return !x?B.appendChild(A):A})},create:function(v,u,w){return this.add(this.doc.createElement(v),v,u,w,1)},createHTML:function(v,u,x){var y="",w;y+="<"+v;for(w in u){if(u.hasOwnProperty(w)&&u[w]!==null){y+=" "+w+'="'+this.encode(u[w])+'"'}}if(typeof(x)!="undefined"){return y+">"+x+"</"+v+">"}return y+" />"},createFragment:function(v){var y,w,x=this.doc,u;u=x.createElement("div");y=x.createDocumentFragment();if(v){u.innerHTML=v}while((w=u.firstChild)){y.appendChild(w)}return y},remove:function(u,v){return this.run(u,function(x){var y,w=x.parentNode;if(!w){return null}if(v){while((y=x.firstChild)){if(!n||y.nodeType!==3||y.nodeValue){w.insertBefore(y,x)}else{x.removeChild(y)}}}return w.removeChild(x)})},setStyle:function(w,u,v){return this.run(w,function(B){var x=this,A,z;if(u){if(typeof(u)==="string"){A=B.style;u=u.replace(/-(\D)/g,function(D,C){return C.toUpperCase()});if(typeof(v)==="number"&&!a[u]){v+="px"}if(u==="opacity"&&B.runtimeStyle&&typeof(B.runtimeStyle.opacity)==="undefined"){A.filter=v===""?"":"alpha(opacity="+(v*100)+")"}if(u=="float"){u="cssFloat" in B.style?"cssFloat":"styleFloat"}try{A[u]=v}catch(y){}if(x.settings.update_styles){B.removeAttribute("data-mce-style")}}else{for(z in u){x.setStyle(B,z,u[z])}}}})},getStyle:function(x,u,w){x=this.get(x);if(!x){return}if(this.doc.defaultView&&w){u=u.replace(/[A-Z]/g,function(y){return"-"+y});try{return this.doc.defaultView.getComputedStyle(x,null).getPropertyValue(u)}catch(v){return null}}u=u.replace(/-(\D)/g,function(z,y){return y.toUpperCase()});if(u=="float"){u=n?"styleFloat":"cssFloat"}if(x.currentStyle&&w){return x.currentStyle[u]}return x.style?x.style[u]:undefined},setStyles:function(v,u){this.setStyle(v,u)},css:function(w,u,v){this.setStyle(w,u,v)},removeAllAttribs:function(u){return this.run(u,function(x){var w,v=x.attributes;for(w=v.length-1;w>=0;w--){x.removeAttributeNode(v.item(w))}})},setAttrib:function(x,y,w){var u=this;if(!x||!y){return}return this.run(x,function(A){var z=u.settings;var v=A.getAttribute(y);if(w!==null){switch(y){case"style":if(!i(w,"string")){f(w,function(B,C){u.setStyle(A,C,B)});return}if(z.keep_values){if(w){A.setAttribute("data-mce-style",w,2)}else{A.removeAttribute("data-mce-style",2)}}A.style.cssText=w;break;case"class":A.className=w||"";break;case"src":case"href":if(z.keep_values){if(z.url_converter){w=z.url_converter.call(z.url_converter_scope||u,w,y,A)}u.setAttrib(A,"data-mce-"+y,w,2)}break;case"shape":A.setAttribute("data-mce-style",w);break}}if(i(w)&&w!==null&&w.length!==0){A.setAttribute(y,""+w,2)}else{A.removeAttribute(y,2)}if(v!=w&&z.onSetAttrib){z.onSetAttrib({attrElm:A,attrName:y,attrValue:w})}})},setAttribs:function(w,v){var u=this;return this.run(w,function(x){f(v,function(z,y){u.setAttrib(x,y,z)})})},getAttrib:function(z,v,y){var x,u=this,w;z=u.get(z);if(!z||z.nodeType!==1){return y===w?false:y}if(!i(y)){y=""}if(/^(src|href|style|coords|shape)$/.test(v)){x=z.getAttribute("data-mce-"+v);if(x){return x}}if(n&&u.props[v]){x=z[u.props[v]];x=x&&x.nodeValue?x.nodeValue:x}if(!x){x=z.getAttribute(v,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(v)){if(z[u.props[v]]===true&&x===""){return v}return x?v:""}if(z.nodeName==="FORM"&&z.getAttributeNode(v)){return z.getAttributeNode(v).nodeValue}if(v==="style"){x=x||z.style.cssText;if(x){x=u.serializeStyle(u.parseStyle(x),z.nodeName);if(u.settings.keep_values){z.setAttribute("data-mce-style",x)}}}if(p&&v==="class"&&x){x=x.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(n){switch(v){case"rowspan":case"colspan":if(x===1){x=""}break;case"size":if(x==="+0"||x===20||x===0){x=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(x===0){x=""}break;case"hspace":if(x===-1){x=""}break;case"maxlength":case"tabindex":if(x===32768||x===2147483647||x==="32768"){x=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(x===65535){return v}return y;case"shape":x=x.toLowerCase();break;default:if(v.indexOf("on")===0&&x){x=(""+x).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1")}}}return(x!==w&&x!==null&&x!=="")?""+x:y},getPos:function(D,A){var v=this,u=0,C=0,w,z=v.doc,B;D=v.get(D);A=A||z.body;if(D){if(A===z.body&&D.getBoundingClientRect){B=D.getBoundingClientRect();A=v.boxModel?z.documentElement:z.body;u=B.left+(z.documentElement.scrollLeft||z.body.scrollLeft)-A.clientLeft;C=B.top+(z.documentElement.scrollTop||z.body.scrollTop)-A.clientTop;return{x:u,y:C}}w=D;while(w&&w!=A&&w.nodeType){u+=w.offsetLeft||0;C+=w.offsetTop||0;w=w.offsetParent}w=D.parentNode;while(w&&w!=A&&w.nodeType){u-=w.scrollLeft||0;C-=w.scrollTop||0;w=w.parentNode}}return{x:u,y:C}},parseStyle:function(u){return this.styles.parse(u)},serializeStyle:function(v,u){return this.styles.serialize(v,u)},addStyle:function(x){var v=this,y=v.doc,w,z;if(v!==q.DOM&&y===document){var u=q.DOM.addedStyles;u=u||[];if(u[x]){return}u[x]=true;q.DOM.addedStyles=u}z=y.getElementById("mceDefaultStyles");if(!z){z=y.createElement("style");z.id="mceDefaultStyles";z.type="text/css";w=y.getElementsByTagName("head")[0];if(w.firstChild){w.insertBefore(z,w.firstChild)}else{w.appendChild(z)}}if(z.styleSheet){z.styleSheet.cssText+=x}else{z.appendChild(y.createTextNode(x))}},loadCSS:function(v){var u=this,x=u.doc,w;if(u!==q.DOM&&x===document){q.DOM.loadCSS(v);return}if(!v){v=""}w=x.getElementsByTagName("head")[0];f(v.split(","),function(y){var z;if(u.files[y]){return}u.files[y]=true;z=u.create("link",{rel:"stylesheet",href:y});if(n&&x.documentMode&&x.recalc){z.onload=function(){if(x.recalc){x.recalc()}z.onload=null}}w.appendChild(z)})},addClass:function(v,u){return this.run(v,function(x){var w;if(!u){return 0}if(this.hasClass(x,u)){return x.className}w=this.removeClass(x,u);x.className=w=(w!==""?(w+" "):"")+u;return w})},removeClass:function(x,u){var v=this,w;return v.run(x,function(z){var y;if(v.hasClass(z,u)){if(!w){w=new RegExp("(^|\\s+)"+u+"(\\s+|$)","g")}y=z.className.replace(w," ");y=o(y!=" "?y:"");z.className=y;if(!y){z.removeAttribute("class");z.removeAttribute("className")}return y}return z.className})},hasClass:function(v,u){v=this.get(v);if(!v||!u){return false}return(" "+v.className+" ").indexOf(" "+u+" ")!==-1},toggleClass:function(w,u,v){v=v===undefined?!this.hasClass(w,u):v;if(this.hasClass(w,u)!==v){if(v){this.addClass(w,u)}else{this.removeClass(w,u)}}},show:function(u){return this.setStyle(u,"display","block")},hide:function(u){return this.setStyle(u,"display","none")},isHidden:function(u){u=this.get(u);return !u||u.style.display=="none"||this.getStyle(u,"display")=="none"},uniqueId:function(u){return(!u?"mce_":u)+(this.counter++)},setHTML:function(w,v){var u=this;return u.run(w,function(y){if(n){while(y.firstChild){y.removeChild(y.firstChild)}try{y.innerHTML="<br />"+v;y.removeChild(y.firstChild)}catch(x){var z=u.create("div");z.innerHTML="<br />"+v;f(k(z.childNodes),function(B,A){if(A&&y.canHaveHTML){y.appendChild(B)}})}}else{y.innerHTML=v}return v})},getOuterHTML:function(w){var v,u=this;w=u.get(w);if(!w){return null}if(w.nodeType===1&&u.hasOuterHTML){return w.outerHTML}v=(w.ownerDocument||u.doc).createElement("body");v.appendChild(w.cloneNode(true));return v.innerHTML},setOuterHTML:function(x,v,w){var u=this;return u.run(x,function(A){function z(){var C,B;B=w.createElement("body");B.innerHTML=v;C=B.lastChild;while(C){u.insertAfter(C.cloneNode(true),A);C=C.previousSibling}u.remove(A)}if(A.nodeType==1){w=w||A.ownerDocument||u.doc;if(n){try{if(A.nodeType==1&&u.hasOuterHTML){A.outerHTML=v}else{z()}}catch(y){z()}}else{z()}}})},decode:e.decode,encode:e.encodeAllRaw,insertAfter:function(u,v){v=this.get(v);return this.run(u,function(x){var w,y;w=v.parentNode;y=v.nextSibling;if(y){w.insertBefore(x,y)}else{w.appendChild(x)}return x})},replace:function(w,v,x){var u=this;return u.run(v,function(y){if(i(y,"array")){w=w.cloneNode(true)}if(x){f(k(y.childNodes),function(z){w.appendChild(z)})}return y.parentNode.replaceChild(w,y)})},rename:function(x,v){var u=this,w;if(x.nodeName!=v.toUpperCase()){w=u.create(v);f(u.getAttribs(x),function(y){u.setAttrib(w,y.nodeName,u.getAttrib(x,y.nodeName))});u.replace(w,x,1)}return w||x},findCommonAncestor:function(w,u){var x=w,v;while(x){v=u;while(v&&x!=v){v=v.parentNode}if(x==v){break}x=x.parentNode}if(!x&&w.ownerDocument){return w.ownerDocument.documentElement}return x},toHex:function(u){return this.styles.toHex(b.trim(u))},run:function(y,x,w){var v=this,u;if(typeof(y)==="string"){y=v.get(y)}if(!y){return false}w=w||this;if(!y.nodeType&&(y.length||y.length===0)){u=[];f(y,function(A,z){if(A){if(typeof(A)=="string"){A=v.get(A)}u.push(x.call(w,A,z))}});return u}return x.call(w,y)},getAttribs:function(w){var u;w=this.get(w);if(!w){return[]}if(n){u=[];if(w.nodeName=="OBJECT"){return w.attributes}if(w.nodeName==="OPTION"&&this.getAttrib(w,"selected")){u.push({specified:1,nodeName:"selected"})}var v=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;w.cloneNode(false).outerHTML.replace(v,"").replace(/[\w:\-]+/gi,function(x){u.push({specified:1,nodeName:x})});return u}return w.attributes},isEmpty:function(x,v){var C=this,z,y,B,u,w,A=0;x=x.firstChild;if(x){u=new h(x,x.parentNode);v=v||C.schema?C.schema.getNonEmptyElements():null;do{B=x.nodeType;if(B===1){if(x.getAttribute("data-mce-bogus")){continue}w=x.nodeName.toLowerCase();if(v&&v[w]){if(w==="br"){A++;continue}return false}y=C.getAttribs(x);z=y.length;while(z--){w=y[z].nodeName;if(w==="name"||w==="data-mce-bookmark"){return false}}}if(B==8){return false}if((B===3&&!t.test(x.nodeValue))){return false}}while((x=u.next()))}return A<=1},createRng:function(){var u=this.doc;return u.createRange?u.createRange():new r(this)},nodeIndex:function(x,y){var u=0,w,v;if(x){for(w=x.nodeType,x=x.previousSibling;x;x=x.previousSibling){v=x.nodeType;if(y&&v==3){if(v==w||!x.nodeValue.length){continue}}u++;w=v}}return u},split:function(y,z,v){var C=this,u=C.createRng(),A,x,B;function w(H){var F,E=H.childNodes,G=H.nodeType;function I(L){var K=L.previousSibling&&L.previousSibling.nodeName=="SPAN";var J=L.nextSibling&&L.nextSibling.nodeName=="SPAN";return K&&J}if(G==1&&H.getAttribute("data-mce-type")=="bookmark"){return}for(F=E.length-1;F>=0;F--){w(E[F])}if(G!=9){if(G==3&&H.nodeValue.length>0){var D=o(H.nodeValue).length;if(!C.isBlock(H.parentNode)||D>0||D===0&&I(H)){return}}else{if(G==1){E=H.childNodes;if(E.length==1&&E[0]&&E[0].nodeType==1&&E[0].getAttribute("data-mce-type")=="bookmark"){H.parentNode.insertBefore(E[0],H)}if(E.length||/^(br|hr|input|img)$/i.test(H.nodeName)){return}}}C.remove(H)}return H}if(y&&z){u.setStart(y.parentNode,C.nodeIndex(y));u.setEnd(z.parentNode,C.nodeIndex(z));A=u.extractContents();u=C.createRng();u.setStart(z.parentNode,C.nodeIndex(z)+1);u.setEnd(y.parentNode,C.nodeIndex(y)+1);x=u.extractContents();B=y.parentNode;B.insertBefore(w(A),y);if(v){B.replaceChild(v,z)}else{B.insertBefore(z,y)}B.insertBefore(w(x),y);C.remove(y);return v||z}},bind:function(z,v,y,x){var u=this;if(b.isArray(z)){var w=z.length;while(w--){z[w]=u.bind(z[w],v,y,x)}return z}if(u.settings.collect&&(z===u.doc||z===u.win)){u.boundEvents.push([z,v,y,x])}return u.events.bind(z,v,y,x||u)},unbind:function(z,v,y){var u=this,w;if(b.isArray(z)){w=z.length;while(w--){z[w]=u.unbind(z[w],v,y)}return z}if(u.boundEvents&&(z===u.doc||z===u.win)){w=u.boundEvents.length;while(w--){var x=u.boundEvents[w];if(z==x[0]&&(!v||v==x[1])&&(!y||y==x[2])){this.events.unbind(x[0],x[1],x[2])}}}return this.events.unbind(z,v,y)},fire:function(w,v,u){return this.events.fire(w,v,u)},getContentEditable:function(v){var u;if(v.nodeType!=1){return null}u=v.getAttribute("data-mce-contenteditable");if(u&&u!=="inherit"){return u}return v.contentEditable!=="inherit"?v.contentEditable:null},destroy:function(){var u=this;if(u.boundEvents){var v=u.boundEvents.length;while(v--){var w=u.boundEvents[v];this.events.unbind(w[0],w[1],w[2])}u.boundEvents=null}if(d.setDocument){d.setDocument()}u.win=u.doc=u.root=u.events=u.frag=null},dumpRng:function(u){return("startContainer: "+u.startContainer.nodeName+", startOffset: "+u.startOffset+", endContainer: "+u.endContainer.nodeName+", endOffset: "+u.endOffset)},_findSib:function(y,u,w){var v=this,x=u;if(y){if(typeof(x)=="string"){x=function(z){return v.is(z,u)}}for(y=y[w];y;y=y[w]){if(x(y)){return y}}}return null}};q.DOM=new q(document);return q});