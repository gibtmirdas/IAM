define("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/ui/Collection","tinymce/ui/DomUtils"],function(b,f,g,a){var h=f.makeMap("focusin focusout scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave wheel keydown keypress keyup contextmenu"," ");var j={};var d="onmousewheel" in document;var e=false;var i="mce-";var c=b.extend({Statics:{elementIdCache:j,classPrefix:i},isRtl:function(){return c.rtl},classPrefix:i,init:function(n){var k=this,m,l;k.settings=n=f.extend({},k.Defaults,n);k._id=n.id||a.id();k._text=k._name="";k._width=k._height=0;k._aria={role:n.role};m=n.classes;if(m){m=m.split(" ");m.map={};l=m.length;while(l--){m.map[m[l]]=true}}k._classes=m||[];k.visible(true);f.each("title text width height name classes visible disabled active value".split(" "),function(o){var q=n[o],p;if(q!==p){k[o](q)}else{if(k["_"+o]===p){k["_"+o]=false}}});k.on("click",function(){if(k.disabled()){return false}});if(n.classes){f.each(n.classes.split(" "),function(o){k.addClass(o)})}k.settings=n;k._borderBox=k.parseBox(n.border);k._paddingBox=k.parseBox(n.padding);k._marginBox=k.parseBox(n.margin);if(n.hidden){k.hide()}},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(m){var k,l=this.getRoot().controlIdLookup;while(m&&l){k=l[m.id];if(k){break}m=m.parentNode}return k},parseBox:function(m){var k,l=10;if(!m){return}if(typeof(m)==="number"){m=m||0;return{top:m,left:m,bottom:m,right:m}}m=m.split(" ");k=m.length;if(k===1){m[1]=m[2]=m[3]=m[0]}else{if(k===2){m[2]=m[0];m[3]=m[1]}else{if(k===3){m[3]=m[1]}}}return{top:parseInt(m[0],l)||0,right:parseInt(m[1],l)||0,bottom:parseInt(m[2],l)||0,left:parseInt(m[3],l)||0}},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(n,l){function k(o){var p=document.defaultView;if(p){o=o.replace(/[A-Z]/g,function(q){return"-"+q});return p.getComputedStyle(n,null).getPropertyValue(o)}return n.currentStyle[o]}function m(o){var p=parseFloat(k(o),10);return isNaN(p)?0:p}return{top:m(l+"TopWidth"),right:m(l+"RightWidth"),bottom:m(l+"BottomWidth"),left:m(l+"LeftWidth")}},initLayoutRect:function(){var A=this,s=A.settings,n,w;var u=A.getEl(),r,y,o,x,q;var k,m,z;n=A._borderBox=A._borderBox||A.measureBox(u,"border");A._paddingBox=A._paddingBox||A.measureBox(u,"padding");A._marginBox=A._marginBox||A.measureBox(u,"margin");z=a.getSize(u);k=s.minWidth;m=s.minHeight;o=k||z.width;x=m||z.height;r=s.width;y=s.height;q=s.autoResize;q=typeof(q)!="undefined"?q:!r&&!y;r=r||o;y=y||x;var t=n.left+n.right;var l=n.top+n.bottom;var p=s.maxWidth||65535;var v=s.maxHeight||65535;A._layoutRect=w={x:s.x||0,y:s.y||0,w:r,h:y,deltaW:t,deltaH:l,contentW:r-t,contentH:y-l,innerW:r-t,innerH:y-l,startMinWidth:k||0,startMinHeight:m||0,minW:Math.min(o,p),minH:Math.min(x,v),maxW:p,maxH:v,autoResize:q,scrollW:0};A._lastLayoutRect={};return w},layoutRect:function(l){var r=this,n=r._layoutRect,q,s,p,o,k,m;if(!n){n=r.initLayoutRect()}if(l){p=n.deltaW;o=n.deltaH;if(l.x!==k){n.x=l.x}if(l.y!==k){n.y=l.y}if(l.minW!==k){n.minW=l.minW}if(l.minH!==k){n.minH=l.minH}s=l.w;if(s!==k){s=s<n.minW?n.minW:s;s=s>n.maxW?n.maxW:s;n.w=s;n.innerW=s-p}s=l.h;if(s!==k){s=s<n.minH?n.minH:s;s=s>n.maxH?n.maxH:s;n.h=s;n.innerH=s-o}s=l.innerW;if(s!==k){s=s<n.minW-p?n.minW-p:s;s=s>n.maxW-p?n.maxW-p:s;n.innerW=s;n.w=s+p}s=l.innerH;if(s!==k){s=s<n.minH-o?n.minH-o:s;s=s>n.maxH-o?n.maxH-o:s;n.innerH=s;n.h=s+o}if(l.contentW!==k){n.contentW=l.contentW}if(l.contentH!==k){n.contentH=l.contentH}q=r._lastLayoutRect;if(q.x!==n.x||q.y!==n.y||q.w!==n.w||q.h!==n.h){m=c.repaintControls;if(m){if(m.map&&!m.map[r._id]){m.push(r);m.map[r._id]=true}}q.x=n.x;q.y=n.y;q.w=n.w;q.h=n.h}return r}return n},repaint:function(){var s=this,l,n,o,k,q=0,m=0,p,r;r=!document.createRange?Math.round:function(t){return t};l=s.getEl().style;o=s._layoutRect;p=s._lastRepaintRect||{};k=s._borderBox;q=k.left+k.right;m=k.top+k.bottom;if(o.x!==p.x){l.left=r(o.x)+"px";p.x=o.x}if(o.y!==p.y){l.top=r(o.y)+"px";p.y=o.y}if(o.w!==p.w){l.width=r(o.w-q)+"px";p.w=o.w}if(o.h!==p.h){l.height=r(o.h-m)+"px";p.h=o.h}if(s._hasBody&&o.innerW!==p.innerW){n=s.getEl("body").style;n.width=r(o.innerW)+"px";p.innerW=o.innerW}if(s._hasBody&&o.innerH!==p.innerH){n=n||s.getEl("body").style;n.height=r(o.innerH)+"px";p.innerH=o.innerH}s._lastRepaintRect=p;s.fire("repaint",{},false)},on:function(n,r){var m=this,q,l,p,o;function k(s){var u,t;return function(v){if(!u){m.parentsAndSelf().each(function(x){var w=x.settings.callbacks;if(w&&(u=w[s])){t=x;return false}})}return u.call(t,v)}}if(r){if(typeof(r)=="string"){r=k(r)}p=n.toLowerCase().split(" ");o=p.length;while(o--){n=p[o];q=m._bindings;if(!q){q=m._bindings={}}l=q[n];if(!l){l=q[n]=[]}l.push(r);if(h[n]){if(!m._nativeEvents){m._nativeEvents={}}m._nativeEvents[n]=true;if(m._rendered){m.bindPendingEvents()}}}}return m},off:function(k,r){var s=this,p,l=s._bindings,o,m,q,n;if(l){if(k){q=k.toLowerCase().split(" ");p=q.length;while(p--){k=q[p];o=l[k];if(!k){for(m in l){l[m].length=0}return s}if(o){if(!r){o.length=0}else{n=o.length;while(n--){if(o[n]===r){o.splice(n,1)}}}}}}else{s._bindings=[]}}return s},fire:function(k,s,t){var u=this,r,p,n,o;k=k.toLowerCase();function m(){return false}function q(){return true}s=s||{};if(!s.type){s.type=k}if(!s.control){s.control=u}if(!s.preventDefault){s.preventDefault=function(){s.isDefaultPrevented=q};s.stopPropagation=function(){s.isPropagationStopped=q};s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=q};s.isDefaultPrevented=m;s.isPropagationStopped=m;s.isImmediatePropagationStopped=m}if(u._bindings){n=u._bindings[k];if(n){for(r=0,p=n.length;r<p;r++){if(!s.isImmediatePropagationStopped()&&n[r].call(u,s)===false){break}}}}if(t!==false){o=u.parent();while(o&&!s.isPropagationStopped()){o.fire(k,s,false);o=o.parent()}}return s},hasEventListeners:function(k){return k in this._bindings},parents:function(k){var l=this,n,m=new g();for(n=l.parent();n;n=n.parent()){m.add(n)}if(k){m=m.filter(k)}return m},parentsAndSelf:function(k){return new g(this).add(this.parents(k))},next:function(){var k=this.parent().items();return k[k.indexOf(this)+1]},prev:function(){var k=this.parent().items();return k[k.indexOf(this)-1]},findCommonAncestor:function(k,m){var l;while(k){l=m;while(l&&k!=l){l=l.parent()}if(k==l){break}k=k.parent()}return k},hasClass:function(k,m){var l=this._classes[m||"control"];k=this.classPrefix+k;return l&&!!l.map[k]},addClass:function(k,n){var l=this,m,o;k=this.classPrefix+k;m=l._classes[n||"control"];if(!m){m=[];m.map={};l._classes[n||"control"]=m}if(!m.map[k]){m.map[k]=k;m.push(k);if(l._rendered){o=l.getEl(n);if(o){o.className=m.join(" ")}}}return l},removeClass:function(k,o){var l=this,n,m,p;k=this.classPrefix+k;n=l._classes[o||"control"];if(n&&n.map[k]){delete n.map[k];m=n.length;while(m--){if(n[m]===k){n.splice(m,1)}}}if(l._rendered){p=l.getEl(o);if(p){p.className=n.join(" ")}}return l},toggleClass:function(k,m,n){var l=this;if(m){l.addClass(k,n)}else{l.removeClass(k,n)}return l},classes:function(l){var k=this._classes[l||"control"];return k?k.join(" "):""},innerHtml:function(k){a.innerHtml(this.getEl(),k);return this},getEl:function(l,k){var n,m=l?this._id+"-"+l:this._id;n=j[m]=(k===true?null:j[m])||a.get(m);return n},visible:function(m){var l=this,k;if(typeof(m)!=="undefined"){if(l._visible!==m){if(l._rendered){l.getEl().style.display=m?"":"none"}l._visible=m;k=l.parent();if(k){k._lastRect=null}l.fire(m?"show":"hide")}return l}return l._visible},show:function(){return this.visible(true)},hide:function(){return this.visible(false)},focus:function(){try{this.getEl().focus()}catch(k){}return this},blur:function(){this.getEl().blur();return this},aria:function(l,m){var k=this,n=k.getEl(k.ariaTarget);if(typeof(m)==="undefined"){return k._aria[l]}else{k._aria[l]=m}if(k._rendered){n.setAttribute(l=="role"?l:"aria-"+l,m)}return k},encode:function(l,k){if(k!==false){l=this.translate(l)}return(l||"").replace(/[&<>"]/g,function(m){return"&#"+m.charCodeAt(0)+";"})},translate:function(k){return c.translate?c.translate(k):k},before:function(l){var k=this,m=k.parent();if(m){m.insert(l,m.items().indexOf(k),true)}return k},after:function(l){var k=this,m=k.parent();if(m){m.insert(l,m.items().indexOf(k))}return k},remove:function(){var m=this,r=m.getEl(),p=m.parent(),n,o;if(m.items){var l=m.items().toArray();o=l.length;while(o--){l[o].remove()}}if(p&&p.items){n=[];p.items().each(function(s){if(s!==m){n.push(s)}});p.items().set(n);p._lastRect=null}if(m._eventsRoot&&m._eventsRoot==m){a.off(r)}var q=m.getRoot().controlIdLookup;if(q){delete q[m._id]}delete j[m._id];if(r&&r.parentNode){var k=r.getElementsByTagName("*");o=k.length;while(o--){delete j[k[o].id]}r.parentNode.removeChild(r)}m._rendered=false;return m},renderBefore:function(l){var k=this;l.parentNode.insertBefore(a.createFragment(k.renderHtml()),l);k.postRender();return k},renderTo:function(l){var k=this;l=l||k.getContainerElm();l.appendChild(a.createFragment(k.renderHtml()));k.postRender();return k},postRender:function(){var s=this,l=s.settings,n,m,q,k,p;for(k in l){if(k.indexOf("on")===0){s.on(k.substr(2),l[k])}}if(s._eventsRoot){for(q=s.parent();!p&&q;q=q.parent()){p=q._eventsRoot}if(p){for(k in p._nativeEvents){s._nativeEvents[k]=true}}}s.bindPendingEvents();if(l.style){n=s.getEl();if(n){n.setAttribute("style",l.style);n.style.cssText=l.style}}if(!s._visible){a.css(s.getEl(),"display","none")}if(s.settings.border){m=s.borderBox();a.css(s.getEl(),{"border-top-width":m.top,"border-right-width":m.right,"border-bottom-width":m.bottom,"border-left-width":m.left})}var o=s.getRoot();if(!o.controlIdLookup){o.controlIdLookup={}}o.controlIdLookup[s._id]=s;for(var r in s._aria){s.aria(r,s._aria[r])}s.fire("postrender",{},false)},scrollIntoView:function(m){function u(B,z){var v,A,w=B;v=A=0;while(w&&w!=z&&w.nodeType){v+=w.offsetLeft||0;A+=w.offsetTop||0;w=w.offsetParent}return{x:v,y:A}}var o=this.getEl(),n=o.parentNode;var r,q,k,t,s,l;var p=u(o,n);r=p.x;q=p.y;k=o.offsetWidth;t=o.offsetHeight;s=n.clientWidth;l=n.clientHeight;if(m=="end"){r-=s-k;q-=l-t}else{if(m=="center"){r-=(s/2)-(k/2);q-=(l/2)-(t/2)}}n.scrollLeft=r;n.scrollTop=q;return this},bindPendingEvents:function(){var w=this,q,o,u,n,s,m;function t(x){var l=w.getParentCtrl(x.target);if(l){l.fire(x.type,x)}}function p(){var l=n._lastHoverCtrl;if(l){l.fire("mouseleave",{target:l.getEl()});l.parents().each(function(x){x.fire("mouseleave",{target:x.getEl()})});n._lastHoverCtrl=null}}function v(B){var A=w.getParentCtrl(B.target),z=n._lastHoverCtrl,l=0,y,x,C;if(A!==z){n._lastHoverCtrl=A;x=A.parents().toArray().reverse();x.push(A);if(z){C=z.parents().toArray().reverse();C.push(z);for(l=0;l<C.length;l++){if(x[l]!==C[l]){break}}for(y=C.length-1;y>=l;y--){z=C[y];z.fire("mouseleave",{target:z.getEl()})}}for(y=l;y<x.length;y++){A=x[y];A.fire("mouseenter",{target:A.getEl()})}}}function k(l){l.preventDefault();if(l.type=="mousewheel"){l.deltaY=-1/40*l.wheelDelta;if(l.wheelDeltaX){l.deltaX=-1/40*l.wheelDeltaX}}else{l.deltaX=0;l.deltaY=l.detail}l=w.fire("wheel",l)}w._rendered=true;s=w._nativeEvents;if(s){u=w.parents().toArray();u.unshift(w);for(q=0,o=u.length;!n&&q<o;q++){n=u[q]._eventsRoot}if(!n){n=u[u.length-1]||w}w._eventsRoot=n;for(o=q,q=0;q<o;q++){u[q]._eventsRoot=n}var r=n._delegates;if(!r){r=n._delegates={}}for(m in s){if(!s){return false}if(m==="wheel"&&!e){if(d){a.on(w.getEl(),"mousewheel",k)}else{a.on(w.getEl(),"DOMMouseScroll",k)}continue}if(m==="mouseenter"||m==="mouseleave"){if(!n._hasMouseEnter){a.on(n.getEl(),"mouseleave",p);a.on(n.getEl(),"mouseover",v);n._hasMouseEnter=1}}else{if(!r[m]){a.on(n.getEl(),m,t);r[m]=true}}s[m]=false}}},getRoot:function(){var n=this,m,k=[];while(n){if(n.rootControl){m=n.rootControl;break}k.push(n);m=n;n=n.parent()}if(!m){m=this}var l=k.length;while(l--){k[l].rootControl=m}return m},reflow:function(){this.repaint();return this}});return c});