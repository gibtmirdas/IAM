(function(c){var b,e,a=[],d=window;c.fn.tinymce=function(j){var o=this,g,h,i,m="",k;if(!o.length){return o}if(!j){return window.tinymce?tinymce.get(o[0].id):null}o.css("visibility","hidden");function n(){var q=[],p=0;if(!k){f();k=true}o.each(function(s,t){var r,v=t.id,u=j.oninit;if(!v){t.id=v=tinymce.DOM.uniqueId()}if(tinymce.get(v)){return}r=new tinymce.Editor(v,j,tinymce.EditorManager);q.push(r);r.on("init",function(){var w,x=u;o.css("visibility","");if(u){if(++p==q.length){if(typeof(x)==="string"){w=(x.indexOf(".")===-1)?null:tinymce.resolve(x.replace(/\.\w+$/,""));x=tinymce.resolve(x)}x.apply(w||tinymce,q)}}})});c.each(q,function(s,r){r.render()})}if(!d.tinymce&&!e&&(g=j.script_url)){e=1;h=g.substring(0,g.lastIndexOf("/"));if(g.indexOf(".min")!=-1){m=".min"}d.tinymce=d.tinyMCEPreInit||{base:h,suffix:m};if(g.indexOf("gzip")!=-1){i=j.language||"en";g=g+(/\?/.test(g)?"&":"?")+"js=true&core=true&suffix="+escape(m)+"&themes="+escape(j.theme||"modern")+"&plugins="+escape(j.plugins||"")+"&languages="+(i||"");if(!d.tinyMCE_GZ){d.tinyMCE_GZ={start:function(){function p(q){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(q))}p("langs/"+i+".js");p("themes/"+j.theme+"/theme"+m+".js");p("themes/"+j.theme+"/langs/"+i+".js");c.each(j.plugins.split(","),function(r,q){if(q){p("plugins/"+q+"/plugin"+m+".js");p("plugins/"+q+"/langs/"+i+".js")}})},end:function(){}}}}var l=document.createElement("script");l.type="text/javascript";l.onload=l.onreadystatechange=function(p){p=p||window.event;if(e!==2&&(p.type=="load"||/complete|loaded/.test(l.readyState))){tinymce.dom.Event.domLoaded=1;e=2;if(j.script_loaded){j.script_loaded()}n();c.each(a,function(q,r){r()})}};l.src=g;document.body.appendChild(l)}else{if(e===1){a.push(n)}else{n()}}return o};c.extend(c.expr[":"],{tinymce:function(g){return !!(g.id&&"tinymce" in window&&tinymce.get(g.id))}});function f(){function i(l){if(l==="remove"){this.each(function(n,o){var m=h(o);if(m){m.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(n,o){var m=tinymce.get(o.id.replace(/_parent$/,""));if(m){m.remove()}})}function k(n){var m=this,l;if(n!=null){i.call(m);m.each(function(p,q){var o;if((o=tinymce.get(q.id))){o.setContent(n)}})}else{if(m.length>0){if((l=tinymce.get(m[0].id))){return l.getContent()}}}}function h(m){var l=null;if(m&&m.id&&d.tinymce){l=tinymce.get(m.id)}return l}function g(l){return !!((l)&&(l.length)&&(d.tinymce)&&(l.is(":tinymce")))}var j={};c.each(["text","html","val"],function(n,l){var o=j[l]=c.fn[l],m=(l==="text");c.fn[l]=function(s){var p=this;if(!g(p)){return o.apply(p,arguments)}if(s!==b){k.call(p.filter(":tinymce"),s);o.apply(p.not(":tinymce"),arguments);return p}else{var r="";var q=arguments;(m?p:p.eq(0)).each(function(u,v){var t=h(v);if(t){r+=m?t.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):t.getContent({save:true})}else{r+=o.apply(c(v),q)}});return r}}});c.each(["append","prepend"],function(n,m){var o=j[m]=c.fn[m],l=(m==="prepend");c.fn[m]=function(q){var p=this;if(!g(p)){return o.apply(p,arguments)}if(q!==b){p.filter(":tinymce").each(function(s,t){var r=h(t);if(r){r.setContent(l?q+r.getContent():r.getContent()+q)}});o.apply(p.not(":tinymce"),arguments);return p}}});c.each(["remove","replaceWith","replaceAll","empty"],function(m,l){var n=j[l]=c.fn[l];c.fn[l]=function(){i.call(this,l);return n.apply(this,arguments)}});j.attr=c.fn.attr;c.fn.attr=function(o,q){var m=this,n=arguments;if((!o)||(o!=="value")||(!g(m))){if(q!==b){return j.attr.apply(m,n)}else{return j.attr.apply(m,n)}}if(q!==b){k.call(m.filter(":tinymce"),q);j.attr.apply(m.not(":tinymce"),n);return m}else{var p=m[0],l=h(p);return l?l.getContent({save:true}):j.attr.apply(c(p),n)}}}})(jQuery);